<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>第6章 matplotlib | wcl</title>
<meta name="author" content="第6章 matplotlib | wcl">
<meta name="description" content="import pandas as pd import numpy as np import re import datetime import matplotlib.pyplot as plt import matplotlib as mpl from matplotlib.lines import Line2D  from matplotlib.patches import...">
<meta name="generator" content="bookdown 0.39 with bs4_book()">
<meta property="og:title" content="第6章 matplotlib | wcl">
<meta property="og:type" content="book">
<meta property="og:url" content="https://github.com/wangchenglong99/wangchenglong99.github.io/matplotlib.html">
<meta property="og:description" content="import pandas as pd import numpy as np import re import datetime import matplotlib.pyplot as plt import matplotlib as mpl from matplotlib.lines import Line2D  from matplotlib.patches import...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="第6章 matplotlib | wcl">
<meta name="twitter:description" content="import pandas as pd import numpy as np import re import datetime import matplotlib.pyplot as plt import matplotlib as mpl from matplotlib.lines import Line2D  from matplotlib.patches import...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.7.0/transition.js"></script><script src="libs/bs3compat-0.7.0/tabs.js"></script><script src="libs/bs3compat-0.7.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><style>
    /* pre {
      max-height: 300px;
      overflow-y: auto;
    }

    pre[class] {
      max-height: 100px;
    } */

    .scroll-200 {
      max-height: 200px;
      overflow-y: auto;
      background-color: inherit;
    }
    </style>
<link rel="shortcut icon" type="image/x-icon" href="icon/favicon.ico">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">wcl</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li class="book-part">数据</li>
<li><a class="" href="introduction.html">introduction</a></li>
<li><a class="" href="%E6%95%B0%E6%8D%AE%E7%BC%96%E7%A0%81%E4%B8%8E%E6%A0%BC%E5%BC%8F.html"><span class="header-section-number">1</span> 数据编码与格式</a></li>
<li><a class="" href="%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E4%B8%8E%E5%AD%98%E5%82%A8.html"><span class="header-section-number">2</span> 数据获取与存储</a></li>
<li><a class="" href="%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97.html"><span class="header-section-number">3</span> 数据清洗</a></li>
<li><a class="" href="%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C.html"><span class="header-section-number">4</span> 数据操作</a></li>
<li><a class="" href="%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97.html"><span class="header-section-number">5</span> 时间序列</a></li>
<li class="book-part">可视化</li>
<li><a class="" href="introduction-1.html">introduction</a></li>
<li><a class="active" href="matplotlib.html"><span class="header-section-number">6</span> matplotlib</a></li>
<li><a class="" href="%E5%9B%BE%E8%A1%A8%E5%AE%9E%E4%BE%8B.html"><span class="header-section-number">7</span> 图表实例</a></li>
<li class="book-part">数据库</li>
<li><a class="" href="introduction-2.html">introduction</a></li>
<li><a class="" href="mysql%E9%80%9F%E6%9F%A5%E8%A1%A8.html"><span class="header-section-number">8</span> mysql速查表</a></li>
<li><a class="" href="pymysql.html"><span class="header-section-number">9</span> PyMysql</a></li>
<li class="book-part">机器学习</li>
<li><a class="" href="introduction-3.html">introduction</a></li>
<li><a class="" href="%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E6%A8%A1%E5%9E%8B.html"><span class="header-section-number">10</span> 时间序列模型</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/wangchenglong99/wangchenglong99.github.io">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="matplotlib" class="section level1" number="6">
<h1>
<span class="header-section-number">第6章</span> matplotlib<a class="anchor" aria-label="anchor" href="#matplotlib"><i class="fas fa-link"></i></a>
</h1>
<div class="sourceCode" id="cb345"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb345-1"><a href="matplotlib.html#cb345-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb345-2"><a href="matplotlib.html#cb345-2" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb345-3"><a href="matplotlib.html#cb345-3" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb345-4"><a href="matplotlib.html#cb345-4" tabindex="-1"></a><span class="im">import</span> datetime</span>
<span id="cb345-5"><a href="matplotlib.html#cb345-5" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb345-6"><a href="matplotlib.html#cb345-6" tabindex="-1"></a><span class="im">import</span> matplotlib <span class="im">as</span> mpl</span>
<span id="cb345-7"><a href="matplotlib.html#cb345-7" tabindex="-1"></a><span class="im">from</span> matplotlib.lines <span class="im">import</span> Line2D   </span>
<span id="cb345-8"><a href="matplotlib.html#cb345-8" tabindex="-1"></a><span class="im">from</span> matplotlib.patches <span class="im">import</span> Circle, Wedge</span>
<span id="cb345-9"><a href="matplotlib.html#cb345-9" tabindex="-1"></a><span class="im">from</span> matplotlib.collections <span class="im">import</span> PatchCollection</span>
<span id="cb345-10"><a href="matplotlib.html#cb345-10" tabindex="-1"></a><span class="im">import</span> matplotlib.dates <span class="im">as</span> mdates</span>
<span id="cb345-11"><a href="matplotlib.html#cb345-11" tabindex="-1"></a>plt.rcParams[<span class="st">'font.sans-serif'</span>]<span class="op">=</span>[<span class="st">'Simhei'</span>]<span class="op">;</span> <span class="co">#SimHei黑体 </span></span>
<span id="cb345-12"><a href="matplotlib.html#cb345-12" tabindex="-1"></a>plt.rcParams[<span class="st">'axes.unicode_minus'</span>]<span class="op">=</span><span class="va">False</span><span class="op">;</span> <span class="co">#正常显示图中负号</span></span></code></pre></div>
<p><a href="https://datawhalechina.github.io/fantastic-matplotlib/"><strong>原文</strong></a></p>
<div id="认识matplotlib" class="section level2" number="6.1">
<h2>
<span class="header-section-number">6.1</span> 认识matplotlib<a class="anchor" aria-label="anchor" href="#%E8%AE%A4%E8%AF%86matplotlib"><i class="fas fa-link"></i></a>
</h2>
<p>Matplotlib是一个Python 2D绘图库，能够以多种硬拷贝格式和跨平台的交互式环境生成出版物质量的图形，用来绘制各种静态，动态，交互式的图表。</p>
<p>Matplotlib可用于Python脚本，Python和IPython Shell、Jupyter notebook，Web应用程序服务器和各种图形用户界面工具包等。</p>
<p>Matplotlib是Python数据可视化库中的泰斗，它已经成为python中公认的数据可视化工具，我们所熟知的pandas和seaborn的绘图接口其实也是基于matplotlib所作的高级封装。</p>
<p>为了对matplotlib有更好的理解，让我们从一些最基本的概念开始认识它，再逐渐过渡到一些高级技巧中。</p>
</div>
<div id="一个最简单的绘图例子" class="section level2" number="6.2">
<h2>
<span class="header-section-number">6.2</span> 一个最简单的绘图例子<a class="anchor" aria-label="anchor" href="#%E4%B8%80%E4%B8%AA%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E7%BB%98%E5%9B%BE%E4%BE%8B%E5%AD%90"><i class="fas fa-link"></i></a>
</h2>
<p>Matplotlib的图像是画在figure（如windows，jupyter窗体）上的，每一个figure又包含了一个或多个axes（一个可以指定坐标系的子区域）。最简单的创建figure以及axes的方式是通过<code>pyplot.subplots</code>命令，创建axes以后，可以使用<code>Axes.plot</code>绘制最简易的折线图。</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb346-1"><a href="matplotlib.html#cb346-1" tabindex="-1"></a>fig,ax <span class="op">=</span> plt.subplots()  <span class="co"># 创建一个包含一个axes的figure</span></span>
<span id="cb346-2"><a href="matplotlib.html#cb346-2" tabindex="-1"></a>ax.plot([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>], [<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>])<span class="op">;</span>  <span class="co"># 绘制图像</span></span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/simple-example-1.png" width="95%" style="display: block; margin: auto;"></div>
<p><strong>Trick</strong>：
在jupyter notebook中使用matplotlib时会发现，代码运行后自动打印出类似<code>&lt;matplotlib.lines.Line2D at 0x23155916dc0&gt;</code>这样一段话，这是因为matplotlib的绘图代码默认打印出最后一个对象。如果不想显示这句话，有以下三种方法，在本章节的代码示例中你能找到这三种方法的使用。</p>
<ol style="list-style-type: decimal">
<li>在代码块最后加一个分号<code>;</code>
</li>
<li>在代码块最后加一句plt.show()</li>
<li>在绘图时将绘图对象显式赋值给一个变量，如将plt.plot([1, 2, 3, 4]) 改成line =plt.plot([1, 2, 3, 4])</li>
</ol>
<p>和MATLAB命令类似，你还可以通过一种更简单的方式绘制图像，<code>matplotlib.pyplot</code>方法能够直接在当前axes上绘制图像，如果用户未指定axes，matplotlib会帮你自动创建一个。所以上面的例子也可以简化为以下这一行代码。</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb347-1"><a href="matplotlib.html#cb347-1" tabindex="-1"></a>line <span class="op">=</span>plt.plot([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>], [<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">3</span>]) </span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/simplify-3.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="figure的组成" class="section level2" number="6.3">
<h2>
<span class="header-section-number">6.3</span> Figure的组成<a class="anchor" aria-label="anchor" href="#figure%E7%9A%84%E7%BB%84%E6%88%90"><i class="fas fa-link"></i></a>
</h2>
<p>现在我们来深入看一下figure的组成。通过一张figure解剖图，我们可以看到一个完整的matplotlib图像通常会包括以下四个层级，这些层级也被称为容器（container），下一节会详细介绍。在matplotlib的世界中，我们将通过各种命令方法来操纵图像中的每一个部分，从而达到数据可视化的最终效果，一副完整的图像实际上是各类子元素的集合。</p>
<ul>
<li><p><code>Figure</code>：顶层级，用来容纳所有绘图元素</p></li>
<li><p><code>Axes</code>：matplotlib宇宙的核心，容纳了大量元素用来构造一幅幅子图，一个figure可以由一个或多个子图组成</p></li>
<li><p><code>Axis</code>：axes的下属层级，用于处理所有和坐标轴，网格有关的元素</p></li>
<li><p><code>Tick</code>：axis的下属层级，用来处理所有和刻度有关的元素</p></li>
</ul>
<div class="inline-figure"><img src="https://matplotlib.org/_images/anatomy.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="两种绘图接口" class="section level2" number="6.4">
<h2>
<span class="header-section-number">6.4</span> 两种绘图接口<a class="anchor" aria-label="anchor" href="#%E4%B8%A4%E7%A7%8D%E7%BB%98%E5%9B%BE%E6%8E%A5%E5%8F%A3"><i class="fas fa-link"></i></a>
</h2>
<p>matplotlib提供了两种最常用的绘图接口</p>
<ol style="list-style-type: decimal">
<li><p>显式创建figure和axes，在上面调用绘图方法，也被称为OO模式（object-oriented style)</p></li>
<li><p>依赖pyplot自动创建figure和axes，并绘图</p></li>
</ol>
<p>使用第一种绘图接口，是这样的：</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb348-1"><a href="matplotlib.html#cb348-1" tabindex="-1"></a>x <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">100</span>)</span>
<span id="cb348-2"><a href="matplotlib.html#cb348-2" tabindex="-1"></a></span>
<span id="cb348-3"><a href="matplotlib.html#cb348-3" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()  </span>
<span id="cb348-4"><a href="matplotlib.html#cb348-4" tabindex="-1"></a>ax.plot(x, x, label<span class="op">=</span><span class="st">'linear'</span>)  </span>
<span id="cb348-5"><a href="matplotlib.html#cb348-5" tabindex="-1"></a>ax.plot(x, x<span class="op">**</span><span class="dv">2</span>, label<span class="op">=</span><span class="st">'quadratic'</span>)  </span>
<span id="cb348-6"><a href="matplotlib.html#cb348-6" tabindex="-1"></a>ax.plot(x, x<span class="op">**</span><span class="dv">3</span>, label<span class="op">=</span><span class="st">'cubic'</span>)  </span>
<span id="cb348-7"><a href="matplotlib.html#cb348-7" tabindex="-1"></a>ax.set_xlabel(<span class="st">'x label'</span>) </span>
<span id="cb348-8"><a href="matplotlib.html#cb348-8" tabindex="-1"></a>ax.set_ylabel(<span class="st">'y label'</span>) </span>
<span id="cb348-9"><a href="matplotlib.html#cb348-9" tabindex="-1"></a>ax.set_title(<span class="st">"Simple Plot"</span>)  </span>
<span id="cb348-10"><a href="matplotlib.html#cb348-10" tabindex="-1"></a>ax.legend() </span>
<span id="cb348-11"><a href="matplotlib.html#cb348-11" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/first-access-1.png" width="95%" style="display: block; margin: auto;"></div>
<p>而如果采用第二种绘图接口，绘制同样的图，代码是这样的：</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb349-1"><a href="matplotlib.html#cb349-1" tabindex="-1"></a>x <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">100</span>)</span>
<span id="cb349-2"><a href="matplotlib.html#cb349-2" tabindex="-1"></a></span>
<span id="cb349-3"><a href="matplotlib.html#cb349-3" tabindex="-1"></a>plt.plot(x, x, label<span class="op">=</span><span class="st">'linear'</span>) </span>
<span id="cb349-4"><a href="matplotlib.html#cb349-4" tabindex="-1"></a>plt.plot(x, x<span class="op">**</span><span class="dv">2</span>, label<span class="op">=</span><span class="st">'quadratic'</span>)  </span>
<span id="cb349-5"><a href="matplotlib.html#cb349-5" tabindex="-1"></a>plt.plot(x, x<span class="op">**</span><span class="dv">3</span>, label<span class="op">=</span><span class="st">'cubic'</span>)</span>
<span id="cb349-6"><a href="matplotlib.html#cb349-6" tabindex="-1"></a>plt.xlabel(<span class="st">'x label'</span>)</span>
<span id="cb349-7"><a href="matplotlib.html#cb349-7" tabindex="-1"></a>plt.ylabel(<span class="st">'y label'</span>)</span>
<span id="cb349-8"><a href="matplotlib.html#cb349-8" tabindex="-1"></a>plt.title(<span class="st">"Simple Plot"</span>)</span>
<span id="cb349-9"><a href="matplotlib.html#cb349-9" tabindex="-1"></a>plt.legend()</span>
<span id="cb349-10"><a href="matplotlib.html#cb349-10" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/second-access-3.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="通用绘图模板" class="section level2" number="6.5">
<h2>
<span class="header-section-number">6.5</span> 通用绘图模板<a class="anchor" aria-label="anchor" href="#%E9%80%9A%E7%94%A8%E7%BB%98%E5%9B%BE%E6%A8%A1%E6%9D%BF"><i class="fas fa-link"></i></a>
</h2>
<p>由于matplotlib的知识点非常繁杂，在实际使用过程中也不可能将全部API都记住，很多时候都是边用边查。因此这里提供一个通用的绘图基础模板，任何复杂的图表几乎都可以基于这个模板骨架填充内容而成。初学者刚开始学习时只需要牢记这一模板就足以应对大部分简单图表的绘制，在学习过程中可以将这个模板模块化，了解每个模块在做什么，在绘制复杂图表时如何修改，填充对应的模块。</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb350-1"><a href="matplotlib.html#cb350-1" tabindex="-1"></a><span class="co"># step1 准备数据</span></span>
<span id="cb350-2"><a href="matplotlib.html#cb350-2" tabindex="-1"></a>x <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">100</span>)</span>
<span id="cb350-3"><a href="matplotlib.html#cb350-3" tabindex="-1"></a>y <span class="op">=</span> x<span class="op">**</span><span class="dv">2</span></span>
<span id="cb350-4"><a href="matplotlib.html#cb350-4" tabindex="-1"></a></span>
<span id="cb350-5"><a href="matplotlib.html#cb350-5" tabindex="-1"></a><span class="co"># step2 设置绘图样式，这一模块的扩展参考第五章进一步学习，这一步不是必须的，样式也可以在绘制图像是进行设置</span></span>
<span id="cb350-6"><a href="matplotlib.html#cb350-6" tabindex="-1"></a>mpl.rc(<span class="st">'lines'</span>, linewidth<span class="op">=</span><span class="dv">4</span>, linestyle<span class="op">=</span><span class="st">'-.'</span>)</span>
<span id="cb350-7"><a href="matplotlib.html#cb350-7" tabindex="-1"></a></span>
<span id="cb350-8"><a href="matplotlib.html#cb350-8" tabindex="-1"></a><span class="co"># step3 定义布局， 这一模块的扩展参考第三章进一步学习</span></span>
<span id="cb350-9"><a href="matplotlib.html#cb350-9" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()  </span>
<span id="cb350-10"><a href="matplotlib.html#cb350-10" tabindex="-1"></a></span>
<span id="cb350-11"><a href="matplotlib.html#cb350-11" tabindex="-1"></a><span class="co"># step4 绘制图像， 这一模块的扩展参考第二章进一步学习</span></span>
<span id="cb350-12"><a href="matplotlib.html#cb350-12" tabindex="-1"></a>ax.plot(x, y, label<span class="op">=</span><span class="st">'linear'</span>)  </span>
<span id="cb350-13"><a href="matplotlib.html#cb350-13" tabindex="-1"></a></span>
<span id="cb350-14"><a href="matplotlib.html#cb350-14" tabindex="-1"></a><span class="co"># step5 添加标签，文字和图例，这一模块的扩展参考第四章进一步学习</span></span>
<span id="cb350-15"><a href="matplotlib.html#cb350-15" tabindex="-1"></a>ax.set_xlabel(<span class="st">'x label'</span>) </span>
<span id="cb350-16"><a href="matplotlib.html#cb350-16" tabindex="-1"></a>ax.set_ylabel(<span class="st">'y label'</span>) </span>
<span id="cb350-17"><a href="matplotlib.html#cb350-17" tabindex="-1"></a>ax.set_title(<span class="st">"Simple Plot"</span>)  </span>
<span id="cb350-18"><a href="matplotlib.html#cb350-18" tabindex="-1"></a>ax.legend()</span>
<span id="cb350-19"><a href="matplotlib.html#cb350-19" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/template-5.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="思考题" class="section level2" number="6.6">
<h2>
<span class="header-section-number">6.6</span> 思考题<a class="anchor" aria-label="anchor" href="#%E6%80%9D%E8%80%83%E9%A2%98"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>请思考两种绘图模式的优缺点和各自适合的使用场景</li>
<li>在第五节绘图模板中我们是以OO模式作为例子展示的，请思考并写一个pyplot绘图模式的简单模板</li>
</ul>
</div>
<div id="概述" class="section level2" number="6.7">
<h2>
<span class="header-section-number">6.7</span> 概述<a class="anchor" aria-label="anchor" href="#%E6%A6%82%E8%BF%B0"><i class="fas fa-link"></i></a>
</h2>
<div id="matplotlib的三层api" class="section level3" number="6.7.1">
<h3>
<span class="header-section-number">6.7.1</span> matplotlib的三层api<a class="anchor" aria-label="anchor" href="#matplotlib%E7%9A%84%E4%B8%89%E5%B1%82api"><i class="fas fa-link"></i></a>
</h3>
<p>matplotlib的原理或者说基础逻辑是，用Artist对象在画布(canvas)上绘制(Render)图形。<br>
就和人作画的步骤类似：</p>
<ol style="list-style-type: decimal">
<li>准备一块画布或画纸</li>
<li>准备好颜料、画笔等制图工具</li>
<li>作画</li>
</ol>
<p>所以matplotlib有三个层次的API：</p>
<p><code>matplotlib.backend_bases.FigureCanvas</code> 代表了绘图区，所有的图像都是在绘图区完成的<br><code>matplotlib.backend_bases.Renderer</code> 代表了渲染器，可以近似理解为画笔，控制如何在 FigureCanvas 上画图。<br><code>matplotlib.artist.Artist</code> 代表了具体的图表组件，即调用了Renderer的接口在Canvas上作图。<br>
前两者处理程序和计算机的底层交互的事项，第三项Artist就是具体的调用接口来做出我们想要的图，比如图形、文本、线条的设定。所以通常来说，我们95%的时间，都是用来和matplotlib.artist.Artist类打交道的。</p>
</div>
<div id="artist的分类" class="section level3" number="6.7.2">
<h3>
<span class="header-section-number">6.7.2</span> Artist的分类<a class="anchor" aria-label="anchor" href="#artist%E7%9A%84%E5%88%86%E7%B1%BB"><i class="fas fa-link"></i></a>
</h3>
<p>Artist有两种类型：<code>primitives</code> 和<code>containers</code>。</p>
<p><code>primitive</code>是基本要素，它包含一些我们要在绘图区作图用到的标准图形对象，如<strong>曲线Line2D，文字text，矩形Rectangle，图像image</strong>等。</p>
<p><code>container</code>是容器，即用来装基本要素的地方，包括<strong>图形figure、坐标系Axes和坐标轴Axis</strong>。他们之间的关系如下图所示：<br><img src="https://img-blog.csdnimg.cn/20201122230916134.jpeg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl8zODYwNDk2MQ==,size_16,color_FFFFFF,t_70#pic_center" alt="分类"></p>
<p>可视化中常见的artist类可以参考下图这张表格，解释下每一列的含义。<br>
第一列表示matplotlib中子图上的辅助方法，可以理解为可视化中不同种类的图表类型，如柱状图，折线图，直方图等，这些图表都可以用这些辅助方法直接画出来，属于更高层级的抽象。</p>
<p>第二列表示不同图表背后的artist类，比如折线图方法<code>plot</code>在底层用到的就是<code>Line2D</code>这一artist类。</p>
<p>第三列是第二列的列表容器，例如所有在子图中创建的<code>Line2D</code>对象都会被自动收集到<code>ax.lines</code>返回的列表中。</p>
<p>下一节的具体案例更清楚地阐释了这三者的关系，其实在很多时候，我们只用记住第一列的辅助方法进行绘图即可，而无需关注具体底层使用了哪些类，但是了解底层类有助于我们绘制一些复杂的图表，因此也很有必要了解。</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="52%">
<col width="16%">
<col width="30%">
</colgroup>
<thead><tr class="header">
<th>Axes helper method</th>
<th>Artist</th>
<th>Container</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>
<code>bar</code> - bar charts</td>
<td><code>Rectangle</code></td>
<td>ax.patches</td>
</tr>
<tr class="even">
<td>
<code>errorbar</code> - error bar plots</td>
<td>
<code>Line2D</code> and <code>Rectangle</code>
</td>
<td>ax.lines and ax.patches</td>
</tr>
<tr class="odd">
<td>
<code>fill</code> - shared area</td>
<td><code>Polygon</code></td>
<td>ax.patches</td>
</tr>
<tr class="even">
<td>
<code>hist</code> - histograms</td>
<td><code>Rectangle</code></td>
<td>ax.patches</td>
</tr>
<tr class="odd">
<td>
<code>imshow</code> - image data</td>
<td><code>AxesImage</code></td>
<td>ax.images</td>
</tr>
<tr class="even">
<td>
<code>plot</code> - xy plots</td>
<td><code>Line2D</code></td>
<td>ax.lines</td>
</tr>
<tr class="odd">
<td>
<code>scatter</code> - scatter charts</td>
<td><code>PolyCollection</code></td>
<td>ax.collections</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="基本元素---primitives" class="section level2" number="6.8">
<h2>
<span class="header-section-number">6.8</span> 基本元素 - primitives<a class="anchor" aria-label="anchor" href="#%E5%9F%BA%E6%9C%AC%E5%85%83%E7%B4%A0---primitives"><i class="fas fa-link"></i></a>
</h2>
<p>各容器中可能会包含多种<code>基本要素-primitives</code>, 所以先介绍下primitives，再介绍容器。</p>
<p>本章重点介绍下 <code>primitives</code> 的几种类型：<strong>曲线-Line2D，矩形-Rectangle，多边形-Polygon，图像-image</strong></p>
<div id="dlines" class="section level3" number="6.8.1">
<h3>
<span class="header-section-number">6.8.1</span> 2DLines<a class="anchor" aria-label="anchor" href="#dlines"><i class="fas fa-link"></i></a>
</h3>
<p>在matplotlib中曲线的绘制，主要是通过类 <code>matplotlib.lines.Line2D</code> 来完成的。</p>
<p>matplotlib中<code>线-line</code>的含义：它表示的可以是连接所有顶点的实线样式，也可以是每个顶点的标记。此外，这条线也会受到绘画风格的影响，比如，我们可以创建虚线种类的线。</p>
<p>它的构造函数：</p>
<blockquote>
<p>class matplotlib.lines.Line2D(xdata, ydata, linewidth=None, linestyle=None, color=None, marker=None, markersize=None, markeredgewidth=None, markeredgecolor=None, markerfacecolor=None, markerfacecoloralt=‘none’, fillstyle=None, antialiased=None, dash_capstyle=None, solid_capstyle=None, dash_joinstyle=None, solid_joinstyle=None, pickradius=5, drawstyle=None, markevery=None, **kwargs)</p>
</blockquote>
<p>其中常用的的参数有：</p>
<ul>
<li>
<strong>xdata</strong>:需要绘制的line中点的在x轴上的取值，若忽略，则默认为range(1,len(ydata)+1)</li>
<li>
<strong>ydata</strong>:需要绘制的line中点的在y轴上的取值</li>
<li>
<strong>linewidth</strong>:线条的宽度</li>
<li>
<strong>linestyle</strong>:线型</li>
<li>
<strong>color</strong>:线条的颜色</li>
<li>
<strong>marker</strong>:点的标记，详细可参考<a href="https://matplotlib.org/api/markers_api.html#module-matplotlib.markers">markers API</a>
</li>
<li>
<strong>markersize</strong>:标记的size</li>
</ul>
<p>其他详细参数可参考<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.lines.Line2D.html">Line2D官方文档</a></p>
</div>
<div id="如何设置line2d的属性" class="section level3" number="6.8.2">
<h3>
<span class="header-section-number">6.8.2</span> 如何设置Line2D的属性<a class="anchor" aria-label="anchor" href="#%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AEline2d%E7%9A%84%E5%B1%9E%E6%80%A7"><i class="fas fa-link"></i></a>
</h3>
<p>有三种方法可以用设置线的属性。</p>
<ol style="list-style-type: decimal">
<li>直接在plot()函数中设置<br>
</li>
<li>通过获得线对象，对线对象进行设置<br>
</li>
<li>获得线属性，使用setp()函数设置</li>
</ol>
<div class="sourceCode" id="cb351"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb351-1"><a href="matplotlib.html#cb351-1" tabindex="-1"></a><span class="co"># 1) 直接在plot()函数中设置</span></span>
<span id="cb351-2"><a href="matplotlib.html#cb351-2" tabindex="-1"></a>x <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">5</span>)</span>
<span id="cb351-3"><a href="matplotlib.html#cb351-3" tabindex="-1"></a>y <span class="op">=</span> [<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">10</span>]</span>
<span id="cb351-4"><a href="matplotlib.html#cb351-4" tabindex="-1"></a>plt.plot(x,y, linewidth<span class="op">=</span><span class="dv">10</span>) <span class="co"># 设置线的粗细参数为10</span></span>
<span id="cb351-5"><a href="matplotlib.html#cb351-5" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/line2d-1-7.png" width="95%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb352"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb352-1"><a href="matplotlib.html#cb352-1" tabindex="-1"></a><span class="co"># 2) 通过获得线对象，对线对象进行设置</span></span>
<span id="cb352-2"><a href="matplotlib.html#cb352-2" tabindex="-1"></a>x <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">5</span>)</span>
<span id="cb352-3"><a href="matplotlib.html#cb352-3" tabindex="-1"></a>y <span class="op">=</span> [<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">10</span>]</span>
<span id="cb352-4"><a href="matplotlib.html#cb352-4" tabindex="-1"></a>line, <span class="op">=</span> plt.plot(x, y, <span class="st">'-'</span>) <span class="co"># 这里等号坐标的line,是一个列表解包的操作，目的是获取plt.plot返回列表中的Line2D对象</span></span>
<span id="cb352-5"><a href="matplotlib.html#cb352-5" tabindex="-1"></a>line.set_antialiased(<span class="va">False</span>)</span>
<span id="cb352-6"><a href="matplotlib.html#cb352-6" tabindex="-1"></a>plt.show() <span class="co"># 关闭抗锯齿功能</span></span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/line2d-2-9.png" width="95%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb353"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb353-1"><a href="matplotlib.html#cb353-1" tabindex="-1"></a><span class="co"># 3) 获得线属性，使用setp()函数设置</span></span>
<span id="cb353-2"><a href="matplotlib.html#cb353-2" tabindex="-1"></a>x <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">5</span>)</span>
<span id="cb353-3"><a href="matplotlib.html#cb353-3" tabindex="-1"></a>y <span class="op">=</span> [<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">10</span>]</span>
<span id="cb353-4"><a href="matplotlib.html#cb353-4" tabindex="-1"></a>lines <span class="op">=</span> plt.plot(x, y)</span>
<span id="cb353-5"><a href="matplotlib.html#cb353-5" tabindex="-1"></a>plt.setp(lines, color<span class="op">=</span><span class="st">'r'</span>, linewidth<span class="op">=</span><span class="dv">10</span>)</span></code></pre></div>
<pre class="scroll-200"><code>[None, None]</code></pre>
<div class="sourceCode" id="cb355"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb355-1"><a href="matplotlib.html#cb355-1" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/line2d-3-11.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="如何绘制lines" class="section level3" number="6.8.3">
<h3>
<span class="header-section-number">6.8.3</span> 如何绘制lines<a class="anchor" aria-label="anchor" href="#%E5%A6%82%E4%BD%95%E7%BB%98%E5%88%B6lines"><i class="fas fa-link"></i></a>
</h3>
<ol style="list-style-type: decimal">
<li>绘制直线line<br>
</li>
<li>errorbar绘制误差折线图</li>
</ol>
<p>介绍两种绘制直线line常用的方法:<br>
+ <strong>plot方法绘制</strong><br>
+ <strong>Line2D对象绘制</strong></p>
<div class="sourceCode" id="cb356"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb356-1"><a href="matplotlib.html#cb356-1" tabindex="-1"></a><span class="co"># 1. plot方法绘制</span></span>
<span id="cb356-2"><a href="matplotlib.html#cb356-2" tabindex="-1"></a>x <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">5</span>)</span>
<span id="cb356-3"><a href="matplotlib.html#cb356-3" tabindex="-1"></a>y1 <span class="op">=</span> [<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">10</span>]</span>
<span id="cb356-4"><a href="matplotlib.html#cb356-4" tabindex="-1"></a>y2<span class="op">=</span> [<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">11</span>]</span>
<span id="cb356-5"><a href="matplotlib.html#cb356-5" tabindex="-1"></a></span>
<span id="cb356-6"><a href="matplotlib.html#cb356-6" tabindex="-1"></a>fig,ax<span class="op">=</span> plt.subplots()</span>
<span id="cb356-7"><a href="matplotlib.html#cb356-7" tabindex="-1"></a>ax.plot(x,y1)</span>
<span id="cb356-8"><a href="matplotlib.html#cb356-8" tabindex="-1"></a>ax.plot(x,y2)</span>
<span id="cb356-9"><a href="matplotlib.html#cb356-9" tabindex="-1"></a><span class="bu">print</span>(ax.lines)</span></code></pre></div>
<pre class="scroll-200"><code>&lt;Axes.ArtistList of 2 lines&gt;</code></pre>
<div class="sourceCode" id="cb358"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb358-1"><a href="matplotlib.html#cb358-1" tabindex="-1"></a>plt.show() <span class="co"># 通过直接使用辅助方法画线，打印ax.lines后可以看到在matplotlib在底层创建了两个Line2D对象</span></span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/line-1-13.png" width="95%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb359"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb359-1"><a href="matplotlib.html#cb359-1" tabindex="-1"></a><span class="co"># 2. Line2D对象绘制</span></span>
<span id="cb359-2"><a href="matplotlib.html#cb359-2" tabindex="-1"></a></span>
<span id="cb359-3"><a href="matplotlib.html#cb359-3" tabindex="-1"></a>x <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">5</span>)</span>
<span id="cb359-4"><a href="matplotlib.html#cb359-4" tabindex="-1"></a>y1 <span class="op">=</span> [<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">10</span>]</span>
<span id="cb359-5"><a href="matplotlib.html#cb359-5" tabindex="-1"></a>y2<span class="op">=</span> [<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">11</span>]</span>
<span id="cb359-6"><a href="matplotlib.html#cb359-6" tabindex="-1"></a>fig,ax<span class="op">=</span> plt.subplots()</span>
<span id="cb359-7"><a href="matplotlib.html#cb359-7" tabindex="-1"></a>lines <span class="op">=</span> [Line2D(x, y1), Line2D(x, y2,color<span class="op">=</span><span class="st">'orange'</span>)]  <span class="co"># 显式创建Line2D对象</span></span>
<span id="cb359-8"><a href="matplotlib.html#cb359-8" tabindex="-1"></a><span class="cf">for</span> line <span class="kw">in</span> lines:</span>
<span id="cb359-9"><a href="matplotlib.html#cb359-9" tabindex="-1"></a>    ax.add_line(line) <span class="co"># 使用add_line方法将创建的Line2D添加到子图中</span></span>
<span id="cb359-10"><a href="matplotlib.html#cb359-10" tabindex="-1"></a>ax.set_xlim(<span class="dv">0</span>,<span class="dv">4</span>)</span></code></pre></div>
<pre class="scroll-200"><code>(0.0, 4.0)</code></pre>
<div class="sourceCode" id="cb361"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb361-1"><a href="matplotlib.html#cb361-1" tabindex="-1"></a>ax.set_ylim(<span class="dv">2</span>, <span class="dv">11</span>)</span></code></pre></div>
<pre class="scroll-200"><code>(2.0, 11.0)</code></pre>
<div class="sourceCode" id="cb363"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb363-1"><a href="matplotlib.html#cb363-1" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/line-2-15.png" width="95%" style="display: block; margin: auto;"></div>
<p><strong>2) errorbar绘制误差折线图</strong></p>
<p>pyplot里有个专门绘制误差线的功能，通过<code>errorbar</code>类实现，它的构造函数：</p>
<blockquote>
<p>matplotlib.pyplot.errorbar(x, y, yerr=None, xerr=None, fmt=’’, ecolor=None, elinewidth=None, capsize=None, barsabove=False, lolims=False, uplims=False, xlolims=False, xuplims=False, errorevery=1, capthick=None, *, data=None, **kwargs)</p>
</blockquote>
<p>其中最主要的参数是前几个:</p>
<ul>
<li>
<strong>x</strong>：需要绘制的line中点的在x轴上的取值<br>
</li>
<li>
<strong>y</strong>：需要绘制的line中点的在y轴上的取值<br>
</li>
<li>
<strong>yerr</strong>：指定y轴水平的误差<br>
</li>
<li>
<strong>xerr</strong>：指定x轴水平的误差<br>
</li>
<li>
<strong>fmt</strong>：指定折线图中某个点的颜色，形状，线条风格，例如‘co–’<br>
</li>
<li>
<strong>ecolor</strong>：指定error bar的颜色<br>
</li>
<li>
<strong>elinewidth</strong>：指定error bar的线条宽度</li>
</ul>
<p>绘制errorbar</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb364-1"><a href="matplotlib.html#cb364-1" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span>
<span id="cb364-2"><a href="matplotlib.html#cb364-2" tabindex="-1"></a>x <span class="op">=</span> np.arange(<span class="dv">10</span>)</span>
<span id="cb364-3"><a href="matplotlib.html#cb364-3" tabindex="-1"></a>y <span class="op">=</span> <span class="fl">2.5</span> <span class="op">*</span> np.sin(x <span class="op">/</span> <span class="dv">20</span> <span class="op">*</span> np.pi)</span>
<span id="cb364-4"><a href="matplotlib.html#cb364-4" tabindex="-1"></a>yerr <span class="op">=</span> np.linspace(<span class="fl">0.05</span>, <span class="fl">0.2</span>, <span class="dv">10</span>)</span>
<span id="cb364-5"><a href="matplotlib.html#cb364-5" tabindex="-1"></a>plt.errorbar(x,y<span class="op">+</span><span class="dv">3</span>,yerr<span class="op">=</span>yerr,fmt<span class="op">=</span><span class="st">'o-'</span>,ecolor<span class="op">=</span><span class="st">'r'</span>,elinewidth<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb364-6"><a href="matplotlib.html#cb364-6" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/errorbar-17.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="patches" class="section level3 tabset" number="6.8.4">
<h3>
<span class="header-section-number">6.8.4</span> patches<a class="anchor" aria-label="anchor" href="#patches"><i class="fas fa-link"></i></a>
</h3>
<p>matplotlib.patches.Patch类是二维图形类，并且它是众多二维图形的父类，它的所有子类见<a href="https://matplotlib.org/stable/api/patches_api.html">matplotlib.patches API</a> ，<br>
Patch类的构造函数：</p>
<blockquote>
<p>Patch(edgecolor=None, facecolor=None, color=None,
linewidth=None, linestyle=None, antialiased=None,
hatch=None, fill=True, capstyle=None, joinstyle=None,
**kwargs)</p>
</blockquote>
<p>本小节重点讲述三种最常见的子类，矩形，多边形和楔形。</p>
<div id="rectangle-矩形" class="section level4" number="6.8.4.1">
<h4>
<span class="header-section-number">6.8.4.1</span> Rectangle-矩形<a class="anchor" aria-label="anchor" href="#rectangle-%E7%9F%A9%E5%BD%A2"><i class="fas fa-link"></i></a>
</h4>
<p><code>Rectangle</code>矩形类在官网中的定义是： 通过锚点xy及其宽度和高度生成。
Rectangle本身的主要比较简单，即xy控制锚点，width和height分别控制宽和高。它的构造函数：</p>
<blockquote>
<p>class matplotlib.patches.Rectangle(xy, width, height, angle=0.0, **kwargs)</p>
</blockquote>
<p>在实际中最常见的矩形图是<code>hist直方图</code>和<code>bar条形图</code>。</p>
<p><strong>1) hist-直方图</strong></p>
<blockquote>
<p>matplotlib.pyplot.hist(x,bins=None,range=None, density=None, bottom=None, histtype=‘bar’, align=‘mid’, log=False, color=None, label=None, stacked=False, normed=None)</p>
</blockquote>
<p>下面是一些常用的参数：</p>
<ul>
<li>
<strong>x</strong>: 数据集，最终的直方图将对数据集进行统计</li>
<li>
<strong>bins</strong>: 统计的区间分布</li>
<li>
<strong>range</strong>: tuple, 显示的区间，range在没有给出bins时生效</li>
<li>
<strong>density</strong>: bool，默认为false，显示的是频数统计结果，为True则显示频率统计结果，这里需要注意，频率统计结果=区间数目/(总数*区间宽度)，和normed效果一致，官方推荐使用density</li>
<li>
<strong>histtype</strong>: 可选{‘bar’, ‘barstacked’, ‘step’, ‘stepfilled’}之一，默认为bar，推荐使用默认配置，step使用的是梯状，stepfilled则会对梯状内部进行填充，效果与bar类似</li>
<li>
<strong>align</strong>: 可选{‘left’, ‘mid’, ‘right’}之一，默认为’mid’，控制柱状图的水平分布，left或者right，会有部分空白区域，推荐使用默认</li>
<li>
<strong>log</strong>: bool，默认False,即y坐标轴是否选择指数刻度</li>
<li>
<strong>stacked</strong>: bool，默认为False，是否为堆积状图</li>
</ul>
<div class="sourceCode" id="cb365"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb365-1"><a href="matplotlib.html#cb365-1" tabindex="-1"></a><span class="co"># hist绘制直方图</span></span>
<span id="cb365-2"><a href="matplotlib.html#cb365-2" tabindex="-1"></a>x<span class="op">=</span>np.random.randint(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">100</span>) <span class="co">#生成[0-100)之间的100个数据,即 数据集 </span></span>
<span id="cb365-3"><a href="matplotlib.html#cb365-3" tabindex="-1"></a>bins<span class="op">=</span>np.arange(<span class="dv">0</span>,<span class="dv">101</span>,<span class="dv">10</span>) <span class="co">#设置连续的边界值，即直方图的分布区间[0,10),[10,20)... </span></span>
<span id="cb365-4"><a href="matplotlib.html#cb365-4" tabindex="-1"></a>plt.hist(x,bins,color<span class="op">=</span><span class="st">'fuchsia'</span>,alpha<span class="op">=</span><span class="fl">0.5</span>)<span class="co">#alpha设置透明度，0为完全透明 </span></span>
<span id="cb365-5"><a href="matplotlib.html#cb365-5" tabindex="-1"></a>plt.xlabel(<span class="st">'scores'</span>) </span>
<span id="cb365-6"><a href="matplotlib.html#cb365-6" tabindex="-1"></a>plt.ylabel(<span class="st">'count'</span>) </span>
<span id="cb365-7"><a href="matplotlib.html#cb365-7" tabindex="-1"></a>plt.xlim(<span class="dv">0</span>,<span class="dv">100</span>)</span></code></pre></div>
<pre class="scroll-200"><code>(0.0, 100.0)</code></pre>
<div class="sourceCode" id="cb367"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb367-1"><a href="matplotlib.html#cb367-1" tabindex="-1"></a>plt.show() <span class="co">#设置x轴分布范围 plt.show()</span></span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/hist-19.png" width="95%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb368"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb368-1"><a href="matplotlib.html#cb368-1" tabindex="-1"></a><span class="co"># Rectangle矩形类绘制直方图</span></span>
<span id="cb368-2"><a href="matplotlib.html#cb368-2" tabindex="-1"></a><span class="co">#df = pd.DataFrame(columns = ['data'])</span></span>
<span id="cb368-3"><a href="matplotlib.html#cb368-3" tabindex="-1"></a><span class="co">#df.loc[:,'data'] = x</span></span>
<span id="cb368-4"><a href="matplotlib.html#cb368-4" tabindex="-1"></a><span class="co">#df['fenzu'] = pd.cut(df['data'], bins=bins, right = False,include_lowest=True)</span></span>
<span id="cb368-5"><a href="matplotlib.html#cb368-5" tabindex="-1"></a></span>
<span id="cb368-6"><a href="matplotlib.html#cb368-6" tabindex="-1"></a><span class="co">#df_cnt = df['fenzu'].value_counts().reset_index()</span></span>
<span id="cb368-7"><a href="matplotlib.html#cb368-7" tabindex="-1"></a><span class="co">#df_cnt.loc[:,'mini'] = df_cnt['index'].astype(str).map(lambda x:re.findall('\[(.*)\,',x)[0]).astype(int)</span></span>
<span id="cb368-8"><a href="matplotlib.html#cb368-8" tabindex="-1"></a><span class="co">#df_cnt.loc[:,'maxi'] = df_cnt['index'].astype(str).map(lambda x:re.findall('\,(.*)\)',x)[0]).astype(int)</span></span>
<span id="cb368-9"><a href="matplotlib.html#cb368-9" tabindex="-1"></a><span class="co">#df_cnt.loc[:,'width'] = df_cnt['maxi']- df_cnt['mini']</span></span>
<span id="cb368-10"><a href="matplotlib.html#cb368-10" tabindex="-1"></a><span class="co">#df_cnt.sort_values('mini',ascending = True,inplace = True)</span></span>
<span id="cb368-11"><a href="matplotlib.html#cb368-11" tabindex="-1"></a><span class="co">#df_cnt.reset_index(inplace = True,drop = True)</span></span>
<span id="cb368-12"><a href="matplotlib.html#cb368-12" tabindex="-1"></a></span>
<span id="cb368-13"><a href="matplotlib.html#cb368-13" tabindex="-1"></a><span class="co">#用Rectangle把hist绘制出来</span></span>
<span id="cb368-14"><a href="matplotlib.html#cb368-14" tabindex="-1"></a></span>
<span id="cb368-15"><a href="matplotlib.html#cb368-15" tabindex="-1"></a><span class="co">#fig = plt.figure()</span></span>
<span id="cb368-16"><a href="matplotlib.html#cb368-16" tabindex="-1"></a><span class="co">#ax1 = fig.add_subplot(111)</span></span>
<span id="cb368-17"><a href="matplotlib.html#cb368-17" tabindex="-1"></a></span>
<span id="cb368-18"><a href="matplotlib.html#cb368-18" tabindex="-1"></a><span class="co">#for i in df_cnt.index:</span></span>
<span id="cb368-19"><a href="matplotlib.html#cb368-19" tabindex="-1"></a><span class="co">#    rect =  plt.Rectangle((df_cnt.loc[i,'mini'],0),df_cnt.loc[i,'width'],df_cnt.loc[i,'fenzu'])</span></span>
<span id="cb368-20"><a href="matplotlib.html#cb368-20" tabindex="-1"></a><span class="co">#    ax1.add_patch(rect)</span></span>
<span id="cb368-21"><a href="matplotlib.html#cb368-21" tabindex="-1"></a></span>
<span id="cb368-22"><a href="matplotlib.html#cb368-22" tabindex="-1"></a><span class="co">#ax1.set_xlim(0, 100)</span></span>
<span id="cb368-23"><a href="matplotlib.html#cb368-23" tabindex="-1"></a><span class="co">#ax1.set_ylim(0, 16)</span></span>
<span id="cb368-24"><a href="matplotlib.html#cb368-24" tabindex="-1"></a><span class="co">#plt.show()</span></span></code></pre></div>
<p><strong>2) bar-柱状图</strong></p>
<blockquote>
<p>matplotlib.pyplot.bar(left, height, alpha=1, width=0.8, color=, edgecolor=, label=, lw=3)</p>
</blockquote>
<p>下面是一些常用的参数：</p>
<ul>
<li>
<strong>left</strong>：x轴的位置序列，一般采用range函数产生一个序列，但是有时候可以是字符串<br>
</li>
<li>
<strong>height</strong>：y轴的数值序列，也就是柱形图的高度，一般就是我们需要展示的数据；<br>
</li>
<li>
<strong>alpha</strong>：透明度，值越小越透明<br>
</li>
<li>
<strong>width</strong>：为柱形图的宽度，一般这是为0.8即可；<br>
</li>
<li>
<strong>color或facecolor</strong>：柱形图填充的颜色；<br>
</li>
<li>
<strong>edgecolor</strong>：图形边缘颜色<br>
</li>
<li>
<strong>label</strong>：解释每个图像代表的含义，这个参数是为legend()函数做铺垫的，表示该次bar的标签</li>
</ul>
<p>有两种方式绘制柱状图</p>
<ul>
<li>bar绘制柱状图<br>
</li>
<li>
<code>Rectangle</code>矩形类绘制柱状图</li>
</ul>
<div class="sourceCode" id="cb369"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb369-1"><a href="matplotlib.html#cb369-1" tabindex="-1"></a><span class="co"># bar绘制柱状图</span></span>
<span id="cb369-2"><a href="matplotlib.html#cb369-2" tabindex="-1"></a>y <span class="op">=</span> <span class="bu">range</span>(<span class="dv">1</span>,<span class="dv">17</span>)</span>
<span id="cb369-3"><a href="matplotlib.html#cb369-3" tabindex="-1"></a>plt.bar(np.arange(<span class="dv">16</span>), y, alpha<span class="op">=</span><span class="fl">0.5</span>, width<span class="op">=</span><span class="fl">0.5</span>, color<span class="op">=</span><span class="st">'yellow'</span>, edgecolor<span class="op">=</span><span class="st">'red'</span>, label<span class="op">=</span><span class="st">'The First Bar'</span>, lw<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb369-4"><a href="matplotlib.html#cb369-4" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/bar-21.png" width="95%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb370"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb370-1"><a href="matplotlib.html#cb370-1" tabindex="-1"></a><span class="co"># Rectangle矩形类绘制柱状图</span></span>
<span id="cb370-2"><a href="matplotlib.html#cb370-2" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span>
<span id="cb370-3"><a href="matplotlib.html#cb370-3" tabindex="-1"></a>ax1 <span class="op">=</span> fig.add_subplot(<span class="dv">111</span>)</span>
<span id="cb370-4"><a href="matplotlib.html#cb370-4" tabindex="-1"></a></span>
<span id="cb370-5"><a href="matplotlib.html#cb370-5" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>,<span class="dv">17</span>):</span>
<span id="cb370-6"><a href="matplotlib.html#cb370-6" tabindex="-1"></a>    rect <span class="op">=</span>  plt.Rectangle((i<span class="op">+</span><span class="fl">0.25</span>,<span class="dv">0</span>),<span class="fl">0.5</span>,i)</span>
<span id="cb370-7"><a href="matplotlib.html#cb370-7" tabindex="-1"></a>    ax1.add_patch(rect)</span>
<span id="cb370-8"><a href="matplotlib.html#cb370-8" tabindex="-1"></a>ax1.set_xlim(<span class="dv">0</span>, <span class="dv">16</span>)</span></code></pre></div>
<pre class="scroll-200"><code>(0.0, 16.0)</code></pre>
<div class="sourceCode" id="cb372"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb372-1"><a href="matplotlib.html#cb372-1" tabindex="-1"></a>ax1.set_ylim(<span class="dv">0</span>, <span class="dv">16</span>)</span></code></pre></div>
<pre class="scroll-200"><code>(0.0, 16.0)</code></pre>
<div class="sourceCode" id="cb374"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb374-1"><a href="matplotlib.html#cb374-1" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/rectangle-bar-23.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="polygon-多边形" class="section level4" number="6.8.4.2">
<h4>
<span class="header-section-number">6.8.4.2</span> Polygon-多边形<a class="anchor" aria-label="anchor" href="#polygon-%E5%A4%9A%E8%BE%B9%E5%BD%A2"><i class="fas fa-link"></i></a>
</h4>
<p>matplotlib.patches.Polygon类是多边形类。它的构造函数：</p>
<blockquote>
<p>class matplotlib.patches.Polygon(xy, closed=True, **kwargs)</p>
</blockquote>
<p>xy是一个N×2的numpy array，为多边形的顶点。<br>
closed为True则指定多边形将起点和终点重合从而显式关闭多边形。</p>
<p>matplotlib.patches.Polygon类中常用的是fill类，它是基于xy绘制一个填充的多边形，它的定义：</p>
<blockquote>
<p>matplotlib.pyplot.fill(*args, data=None, **kwargs)</p>
</blockquote>
<p>参数说明 : 关于x、y和color的序列，其中color是可选的参数，每个多边形都是由其节点的x和y位置列表定义的，后面可以选择一个颜色说明符。您可以通过提供多个x、y、<a href="%E5%9B%BE%E8%A1%A8%E5%AE%9E%E4%BE%8B.html#%E9%A2%9C%E8%89%B2">颜色</a>组来绘制多个多边形。</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb375-1"><a href="matplotlib.html#cb375-1" tabindex="-1"></a><span class="co"># 用fill来绘制图形</span></span>
<span id="cb375-2"><a href="matplotlib.html#cb375-2" tabindex="-1"></a>x <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">5</span> <span class="op">*</span> np.pi, <span class="dv">1000</span>) </span>
<span id="cb375-3"><a href="matplotlib.html#cb375-3" tabindex="-1"></a>y1 <span class="op">=</span> np.sin(x)</span>
<span id="cb375-4"><a href="matplotlib.html#cb375-4" tabindex="-1"></a>y2 <span class="op">=</span> np.sin(<span class="dv">2</span> <span class="op">*</span> x) </span>
<span id="cb375-5"><a href="matplotlib.html#cb375-5" tabindex="-1"></a>plt.fill(x, y1, color <span class="op">=</span> <span class="st">"g"</span>, alpha <span class="op">=</span> <span class="fl">0.3</span>)</span>
<span id="cb375-6"><a href="matplotlib.html#cb375-6" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/fill-color-25.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="wedge-契形" class="section level4" number="6.8.4.3">
<h4>
<span class="header-section-number">6.8.4.3</span> Wedge-契形<a class="anchor" aria-label="anchor" href="#wedge-%E5%A5%91%E5%BD%A2"><i class="fas fa-link"></i></a>
</h4>
<p>matplotlib.patches.Wedge类是楔型类。其基类是matplotlib.patches.Patch，它的构造函数：</p>
<blockquote>
<p>class matplotlib.patches.Wedge(center, r, theta1, theta2, width=None, **kwargs)</p>
</blockquote>
<p>一个Wedge-楔型 是以坐标x,y为中心，半径为r，从θ1扫到θ2(单位是度)。<br>
如果宽度给定，则从内半径r -宽度到外半径r画出部分楔形。wedge中比较常见的是绘制饼状图。</p>
<p>matplotlib.pyplot.pie语法：</p>
<blockquote>
<p>matplotlib.pyplot.pie(x, explode=None, labels=None, colors=None, autopct=None, pctdistance=0.6, shadow=False, labeldistance=1.1, startangle=0, radius=1, counterclock=True, wedgeprops=None, textprops=None, center=0, 0, frame=False, rotatelabels=False, *, normalize=None, data=None)</p>
</blockquote>
<p>制作数据x的饼图，每个楔子的面积用x/sum(x)表示。<br>
其中最主要的参数是前4个：</p>
<ul>
<li>
<strong>x</strong>：楔型的形状，一维数组。</li>
<li>
<strong>explode</strong>：如果不是等于None，则是一个len(x)数组，它指定用于偏移每个楔形块的半径的分数。<br>
</li>
<li>
<strong>labels</strong>：用于指定每个楔型块的标记，取值是列表或为None。<br>
</li>
<li>
<strong>colors</strong>：饼图循环使用的颜色序列。如果取值为None，将使用当前活动循环中的颜色。<br>
</li>
<li>
<strong>startangle</strong>：饼状图开始的绘制的角度。</li>
</ul>
<div class="sourceCode" id="cb376"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb376-1"><a href="matplotlib.html#cb376-1" tabindex="-1"></a><span class="co"># pie绘制饼状图</span></span>
<span id="cb376-2"><a href="matplotlib.html#cb376-2" tabindex="-1"></a>labels <span class="op">=</span> <span class="st">'Frogs'</span>, <span class="st">'Hogs'</span>, <span class="st">'Dogs'</span>, <span class="st">'Logs'</span></span>
<span id="cb376-3"><a href="matplotlib.html#cb376-3" tabindex="-1"></a>sizes <span class="op">=</span> [<span class="dv">15</span>, <span class="dv">30</span>, <span class="dv">45</span>, <span class="dv">10</span>] </span>
<span id="cb376-4"><a href="matplotlib.html#cb376-4" tabindex="-1"></a>explode <span class="op">=</span> (<span class="dv">0</span>, <span class="fl">0.1</span>, <span class="dv">0</span>, <span class="dv">0</span>) </span>
<span id="cb376-5"><a href="matplotlib.html#cb376-5" tabindex="-1"></a>fig1, ax1 <span class="op">=</span> plt.subplots() </span>
<span id="cb376-6"><a href="matplotlib.html#cb376-6" tabindex="-1"></a>ax1.pie(sizes, explode<span class="op">=</span>explode, labels<span class="op">=</span>labels, autopct<span class="op">=</span><span class="st">'</span><span class="sc">%1.1f%%</span><span class="st">'</span>, shadow<span class="op">=</span><span class="va">True</span>, startangle<span class="op">=</span><span class="dv">90</span>) </span></code></pre></div>
<pre class="scroll-200"><code>([&lt;matplotlib.patches.Wedge object at 0x000002076D7EEF60&gt;, &lt;matplotlib.patches.Wedge object at 0x000002076B2B0D10&gt;, &lt;matplotlib.patches.Wedge object at 0x0000020770C93CB0&gt;, &lt;matplotlib.patches.Wedge object at 0x0000020770CC00E0&gt;], [Text(-0.4993895680663527, 0.9801071672559598, 'Frogs'), Text(-1.1412677917792124, -0.3708204787324995, 'Hogs'), Text(0.9801072140121813, -0.4993894763020948, 'Dogs'), Text(0.33991864973549485, 1.0461621822461364, 'Logs')], [Text(-0.2723943098543742, 0.5346039094123416, '15.0%'), Text(-0.6657395452045406, -0.2163119459272914, '30.0%'), Text(0.5346039349157352, -0.27239425980114257, '45.0%'), Text(0.1854101725829972, 0.5706339175888016, '10.0%')])</code></pre>
<div class="sourceCode" id="cb378"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb378-1"><a href="matplotlib.html#cb378-1" tabindex="-1"></a>ax1.axis(<span class="st">'equal'</span>)</span></code></pre></div>
<pre class="scroll-200"><code>(-1.1998593997207165, 1.1047438740833693, -1.0999843660947275, 1.0999992555283205)</code></pre>
<div class="sourceCode" id="cb380"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb380-1"><a href="matplotlib.html#cb380-1" tabindex="-1"></a>plt.show() <span class="co"># Equal aspect ratio ensures that pie is drawn as a circle. </span></span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/pie-27.png" width="95%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb381"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb381-1"><a href="matplotlib.html#cb381-1" tabindex="-1"></a><span class="co"># wedge绘制饼图</span></span>
<span id="cb381-2"><a href="matplotlib.html#cb381-2" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">5</span>,<span class="dv">5</span>))</span>
<span id="cb381-3"><a href="matplotlib.html#cb381-3" tabindex="-1"></a>ax1 <span class="op">=</span> fig.add_subplot(<span class="dv">111</span>)</span>
<span id="cb381-4"><a href="matplotlib.html#cb381-4" tabindex="-1"></a>theta1 <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb381-5"><a href="matplotlib.html#cb381-5" tabindex="-1"></a>sizes <span class="op">=</span> [<span class="dv">15</span>, <span class="dv">30</span>, <span class="dv">45</span>, <span class="dv">10</span>] </span>
<span id="cb381-6"><a href="matplotlib.html#cb381-6" tabindex="-1"></a>patches <span class="op">=</span> []</span>
<span id="cb381-7"><a href="matplotlib.html#cb381-7" tabindex="-1"></a>patches <span class="op">+=</span> [</span>
<span id="cb381-8"><a href="matplotlib.html#cb381-8" tabindex="-1"></a>    Wedge((<span class="fl">0.5</span>, <span class="fl">0.5</span>), <span class="fl">.4</span>, <span class="dv">0</span>, <span class="dv">54</span>),           </span>
<span id="cb381-9"><a href="matplotlib.html#cb381-9" tabindex="-1"></a>    Wedge((<span class="fl">0.5</span>, <span class="fl">0.5</span>), <span class="fl">.4</span>, <span class="dv">54</span>, <span class="dv">162</span>),  </span>
<span id="cb381-10"><a href="matplotlib.html#cb381-10" tabindex="-1"></a>    Wedge((<span class="fl">0.5</span>, <span class="fl">0.5</span>), <span class="fl">.4</span>, <span class="dv">162</span>, <span class="dv">324</span>),           </span>
<span id="cb381-11"><a href="matplotlib.html#cb381-11" tabindex="-1"></a>    Wedge((<span class="fl">0.5</span>, <span class="fl">0.5</span>), <span class="fl">.4</span>, <span class="dv">324</span>, <span class="dv">360</span>),  </span>
<span id="cb381-12"><a href="matplotlib.html#cb381-12" tabindex="-1"></a>]</span>
<span id="cb381-13"><a href="matplotlib.html#cb381-13" tabindex="-1"></a>colors <span class="op">=</span> <span class="dv">100</span> <span class="op">*</span> np.random.rand(<span class="bu">len</span>(patches))</span>
<span id="cb381-14"><a href="matplotlib.html#cb381-14" tabindex="-1"></a>p <span class="op">=</span> PatchCollection(patches, alpha<span class="op">=</span><span class="fl">0.8</span>)</span>
<span id="cb381-15"><a href="matplotlib.html#cb381-15" tabindex="-1"></a>p.set_array(colors)</span>
<span id="cb381-16"><a href="matplotlib.html#cb381-16" tabindex="-1"></a>ax1.add_collection(p)</span>
<span id="cb381-17"><a href="matplotlib.html#cb381-17" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/wedge-pie-29.png" width="95%" style="display: block; margin: auto;"></div>
</div>
</div>
<div id="collections" class="section level3" number="6.8.5">
<h3>
<span class="header-section-number">6.8.5</span> collections<a class="anchor" aria-label="anchor" href="#collections"><i class="fas fa-link"></i></a>
</h3>
<p>collections类是用来绘制一组对象的集合，collections有许多不同的子类，如RegularPolyCollection, CircleCollection, Pathcollection, 分别对应不同的集合子类型。其中比较常用的就是散点图，它是属于PathCollection子类，scatter方法提供了该类的封装，根据x与y绘制不同大小或颜色标记的散点图。 它的构造方法：</p>
<blockquote>
<p>Axes.scatter(self, x, y, s=None, c=None, marker=None, cmap=None, norm=None, vmin=None, vmax=None, alpha=None, linewidths=None, verts=<deprecated parameter>, edgecolors=None, *, plotnonfinite=False, data=None, **kwargs)</deprecated></p>
</blockquote>
<p>其中最主要的参数是前5个：</p>
<ul>
<li>
<strong>x</strong>：数据点x轴的位置<br>
</li>
<li>
<strong>y</strong>：数据点y轴的位置<br>
</li>
<li>
<strong>s</strong>：尺寸大小<br>
</li>
<li>
<strong>c</strong>：可以是单个颜色格式的字符串，也可以是一系列颜色<br>
</li>
<li>
<strong>marker</strong>: 标记的类型</li>
</ul>
<div class="sourceCode" id="cb382"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb382-1"><a href="matplotlib.html#cb382-1" tabindex="-1"></a><span class="co"># 用scatter绘制散点图</span></span>
<span id="cb382-2"><a href="matplotlib.html#cb382-2" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">8</span>,<span class="dv">10</span>] </span>
<span id="cb382-3"><a href="matplotlib.html#cb382-3" tabindex="-1"></a>y <span class="op">=</span> [<span class="dv">10</span>]<span class="op">*</span><span class="bu">len</span>(x) </span>
<span id="cb382-4"><a href="matplotlib.html#cb382-4" tabindex="-1"></a>s <span class="op">=</span> [<span class="dv">20</span><span class="op">*</span><span class="dv">2</span><span class="op">**</span>n <span class="cf">for</span> n <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(x))] </span>
<span id="cb382-5"><a href="matplotlib.html#cb382-5" tabindex="-1"></a>plt.scatter(x,y,s<span class="op">=</span>s) </span>
<span id="cb382-6"><a href="matplotlib.html#cb382-6" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/scatter-31.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="images" class="section level3" number="6.8.6">
<h3>
<span class="header-section-number">6.8.6</span> images<a class="anchor" aria-label="anchor" href="#images"><i class="fas fa-link"></i></a>
</h3>
<p>images是matplotlib中绘制image图像的类，其中最常用的imshow可以根据数组绘制成图像，它的构造函数：</p>
<blockquote>
<p>class matplotlib.image.AxesImage(ax, cmap=None, norm=None, interpolation=None, origin=None, extent=None, filternorm=True, filterrad=4.0, resample=False, **kwargs)</p>
</blockquote>
<p>imshow根据数组绘制图像</p>
<blockquote>
<p>matplotlib.pyplot.imshow(X, cmap=None, norm=None, aspect=None, interpolation=None, alpha=None, vmin=None, vmax=None, origin=None, extent=None, shape=<deprecated parameter>, filternorm=1, filterrad=4.0, imlim=<deprecated parameter>, resample=None, url=None, *, data=None, **kwargs）</deprecated></deprecated></p>
</blockquote>
<p>使用imshow画图时首先需要传入一个数组，数组对应的是空间内的像素位置和像素点的值，interpolation参数可以设置不同的差值方法，具体效果如下。</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb383-1"><a href="matplotlib.html#cb383-1" tabindex="-1"></a>methods <span class="op">=</span> [<span class="va">None</span>, <span class="st">'none'</span>, <span class="st">'nearest'</span>, <span class="st">'bilinear'</span>, <span class="st">'bicubic'</span>, <span class="st">'spline16'</span>,</span>
<span id="cb383-2"><a href="matplotlib.html#cb383-2" tabindex="-1"></a>           <span class="st">'spline36'</span>, <span class="st">'hanning'</span>, <span class="st">'hamming'</span>, <span class="st">'hermite'</span>, <span class="st">'kaiser'</span>, <span class="st">'quadric'</span>,</span>
<span id="cb383-3"><a href="matplotlib.html#cb383-3" tabindex="-1"></a>           <span class="st">'catrom'</span>, <span class="st">'gaussian'</span>, <span class="st">'bessel'</span>, <span class="st">'mitchell'</span>, <span class="st">'sinc'</span>, <span class="st">'lanczos'</span>]</span>
<span id="cb383-4"><a href="matplotlib.html#cb383-4" tabindex="-1"></a></span>
<span id="cb383-5"><a href="matplotlib.html#cb383-5" tabindex="-1"></a>grid <span class="op">=</span> np.random.rand(<span class="dv">4</span>, <span class="dv">4</span>)</span>
<span id="cb383-6"><a href="matplotlib.html#cb383-6" tabindex="-1"></a></span>
<span id="cb383-7"><a href="matplotlib.html#cb383-7" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(nrows<span class="op">=</span><span class="dv">3</span>, ncols<span class="op">=</span><span class="dv">6</span>, figsize<span class="op">=</span>(<span class="dv">9</span>, <span class="dv">6</span>),</span>
<span id="cb383-8"><a href="matplotlib.html#cb383-8" tabindex="-1"></a>                        subplot_kw<span class="op">=</span>{<span class="st">'xticks'</span>: [], <span class="st">'yticks'</span>: []})</span>
<span id="cb383-9"><a href="matplotlib.html#cb383-9" tabindex="-1"></a></span>
<span id="cb383-10"><a href="matplotlib.html#cb383-10" tabindex="-1"></a><span class="cf">for</span> ax, interp_method <span class="kw">in</span> <span class="bu">zip</span>(axs.flat, methods):</span>
<span id="cb383-11"><a href="matplotlib.html#cb383-11" tabindex="-1"></a>    ax.imshow(grid, interpolation<span class="op">=</span>interp_method, cmap<span class="op">=</span><span class="st">'viridis'</span>)</span>
<span id="cb383-12"><a href="matplotlib.html#cb383-12" tabindex="-1"></a>    ax.set_title(<span class="bu">str</span>(interp_method))</span>
<span id="cb383-13"><a href="matplotlib.html#cb383-13" tabindex="-1"></a></span>
<span id="cb383-14"><a href="matplotlib.html#cb383-14" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb383-15"><a href="matplotlib.html#cb383-15" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/imshow-33.png" width="95%" style="display: block; margin: auto;"></div>
</div>
</div>
<div id="对象容器---object-container" class="section level2" number="6.9">
<h2>
<span class="header-section-number">6.9</span> 对象容器 - Object container<a class="anchor" aria-label="anchor" href="#%E5%AF%B9%E8%B1%A1%E5%AE%B9%E5%99%A8---object-container"><i class="fas fa-link"></i></a>
</h2>
<p>容器会包含一些<code>primitives</code>，并且容器还有它自身的属性。<br>
比如<code>Axes Artist</code>，它是一种容器，它包含了很多<code>primitives</code>，比如<code>Line2D</code>，<code>Text</code>；同时，它也有自身的属性，比如<code>xscal</code>，用来控制X轴是<code>linear</code>还是<code>log</code>的。</p>
<div id="figure容器" class="section level3" number="6.9.1">
<h3>
<span class="header-section-number">6.9.1</span> Figure容器<a class="anchor" aria-label="anchor" href="#figure%E5%AE%B9%E5%99%A8"><i class="fas fa-link"></i></a>
</h3>
<p><code>matplotlib.figure.Figure</code>是<code>Artist</code>最顶层的<code>container</code>对象容器，它包含了图表中的所有元素。一张图表的背景就是在<code>Figure.patch</code>的一个矩形<code>Rectangle</code>。<br>
当我们向图表添加<code>Figure.add_subplot()</code>或者<code>Figure.add_axes()</code>元素时，这些都会被添加到<code>Figure.axes</code>列表中。</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb384-1"><a href="matplotlib.html#cb384-1" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span>
<span id="cb384-2"><a href="matplotlib.html#cb384-2" tabindex="-1"></a>ax1 <span class="op">=</span> fig.add_subplot(<span class="dv">211</span>) <span class="co"># 作一幅2*1的图，选择第1个子图</span></span>
<span id="cb384-3"><a href="matplotlib.html#cb384-3" tabindex="-1"></a>ax2 <span class="op">=</span> fig.add_axes([<span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.7</span>, <span class="fl">0.3</span>]) <span class="co"># 位置参数，四个数分别代表了(left,bottom,width,height)</span></span>
<span id="cb384-4"><a href="matplotlib.html#cb384-4" tabindex="-1"></a><span class="bu">print</span>(ax1) </span></code></pre></div>
<pre class="scroll-200"><code>Axes(0.125,0.53;0.775x0.35)</code></pre>
<div class="sourceCode" id="cb386"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb386-1"><a href="matplotlib.html#cb386-1" tabindex="-1"></a><span class="bu">print</span>(fig.axes) <span class="co"># fig.axes 中包含了subplot和axes两个实例, 刚刚添加的</span></span></code></pre></div>
<pre class="scroll-200"><code>[&lt;Axes: &gt;, &lt;Axes: &gt;]</code></pre>
<div class="inline-figure"><img src="matplotlib_files/figure-html/figure.axes-35.png" width="95%" style="display: block; margin: auto;"></div>
<p>由于<code>Figure</code>维持了<code>current axes</code>，因此你不应该手动的从<code>Figure.axes</code>列表中添加删除元素，而是要通过<code>Figure.add_subplot()</code>、<code>Figure.add_axes()</code>来添加元素，通过<code>Figure.delaxes()</code>来删除元素。但是你可以迭代或者访问<code>Figure.axes</code>中的<code>Axes</code>，然后修改这个<code>Axes</code>的属性。</p>
<p>比如下面的遍历axes里的内容，并且添加网格线：</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb388-1"><a href="matplotlib.html#cb388-1" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span>
<span id="cb388-2"><a href="matplotlib.html#cb388-2" tabindex="-1"></a>ax1 <span class="op">=</span> fig.add_subplot(<span class="dv">211</span>)</span>
<span id="cb388-3"><a href="matplotlib.html#cb388-3" tabindex="-1"></a></span>
<span id="cb388-4"><a href="matplotlib.html#cb388-4" tabindex="-1"></a><span class="cf">for</span> ax <span class="kw">in</span> fig.axes:</span>
<span id="cb388-5"><a href="matplotlib.html#cb388-5" tabindex="-1"></a>    ax.grid(<span class="va">True</span>)</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/for-axes-37.png" width="95%" style="display: block; margin: auto;"></div>
<p><code>Figure</code>也有它自己的<code>text、line、patch、image</code>。你可以直接通过<code>add primitive</code>语句直接添加。但是注意<code>Figure</code>默认的坐标系是以像素为单位，你可能需要转换成figure坐标系：(0,0)表示左下点，(1,1)表示右上点。</p>
<p><strong>Figure容器的常见属性：</strong></p>
<p><code>Figure.patch</code>属性：Figure的背景矩形<br><code>Figure.axes</code>属性：一个Axes实例的列表（包括Subplot)<br><code>Figure.images</code>属性：一个FigureImages patch列表<br><code>Figure.lines</code>属性：一个Line2D实例的列表（很少使用）<br><code>Figure.legends</code>属性：一个Figure Legend实例列表（不同于Axes.legends)<br><code>Figure.texts</code>属性：一个Figure Text实例列表</p>
</div>
<div id="axes容器" class="section level3" number="6.9.2">
<h3>
<span class="header-section-number">6.9.2</span> Axes容器<a class="anchor" aria-label="anchor" href="#axes%E5%AE%B9%E5%99%A8"><i class="fas fa-link"></i></a>
</h3>
<p><code>matplotlib.axes.Axes</code>是matplotlib的核心。大量的用于绘图的<code>Artist</code>存放在它内部，并且它有许多辅助方法来创建和添加<code>Artist</code>给它自己，而且它也有许多赋值方法来访问和修改这些<code>Artist</code>。</p>
<p>和<code>Figure</code>容器类似，<code>Axes</code>包含了一个patch属性，对于笛卡尔坐标系而言，它是一个<code>Rectangle</code>；对于极坐标而言，它是一个<code>Circle</code>。这个patch属性决定了绘图区域的形状、背景和边框。</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb389-1"><a href="matplotlib.html#cb389-1" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span>
<span id="cb389-2"><a href="matplotlib.html#cb389-2" tabindex="-1"></a>ax <span class="op">=</span> fig.add_subplot(<span class="dv">111</span>)</span>
<span id="cb389-3"><a href="matplotlib.html#cb389-3" tabindex="-1"></a>rect <span class="op">=</span> ax.patch  <span class="co"># axes的patch是一个Rectangle实例</span></span>
<span id="cb389-4"><a href="matplotlib.html#cb389-4" tabindex="-1"></a>rect.set_facecolor(<span class="st">'green'</span>)</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/axes-container-39.png" width="95%" style="display: block; margin: auto;"></div>
<p><code>Axes</code>有许多方法用于绘图，如<code>.plot()、.text()、.hist()、.imshow()</code>等方法用于创建大多数常见的<code>primitive</code>(如<code>Line2D，Rectangle，Text，Image</code>等等）。在<code>primitives</code>中已经涉及，不再赘述。</p>
<p>Subplot就是一个特殊的Axes，其实例是位于网格中某个区域的Subplot实例。其实你也可以在任意区域创建Axes，通过Figure.add_axes([left,bottom,width,height])来创建一个任意区域的Axes，其中left,bottom,width,height都是[0—1]之间的浮点数，他们代表了相对于Figure的坐标。</p>
<p>你不应该直接通过<code>Axes.lines</code>和<code>Axes.patches</code>列表来添加图表。因为当创建或添加一个对象到图表中时，<code>Axes</code>会做许多自动化的工作:<br>
它会设置Artist中figure和axes的属性，同时默认Axes的转换；<br>
它也会检视Artist中的数据，来更新数据结构，这样数据范围和呈现方式可以根据作图范围自动调整。</p>
<p>你也可以使用Axes的辅助方法<code>.add_line()</code>和<code>.add_patch()</code>方法来直接添加。</p>
<p>另外Axes还包含两个最重要的Artist container：</p>
<p><code>ax.xaxis</code>：XAxis对象的实例，用于处理x轴tick以及label的绘制<br><code>ax.yaxis</code>：YAxis对象的实例，用于处理y轴tick以及label的绘制</p>
<p><strong>Axes容器</strong>的常见属性有：</p>
<p><code>artists</code>: Artist实例列表<br><code>patch</code>: Axes所在的矩形实例<br><code>collections</code>: Collection实例<br><code>images</code>: Axes图像<br><code>legends</code>: Legend 实例<br><code>lines</code>: Line2D 实例<br><code>patches</code>: Patch 实例<br><code>texts</code>: Text 实例<br><code>xaxis</code>: matplotlib.axis.XAxis 实例<br><code>yaxis</code>: matplotlib.axis.YAxis 实例</p>
</div>
<div id="axis容器" class="section level3" number="6.9.3">
<h3>
<span class="header-section-number">6.9.3</span> Axis容器<a class="anchor" aria-label="anchor" href="#axis%E5%AE%B9%E5%99%A8"><i class="fas fa-link"></i></a>
</h3>
<p><code>matplotlib.axis.Axis</code>实例处理<code>tick line</code>、<code>grid line</code>、<code>tick label</code>以及<code>axis label</code>的绘制，它包括坐标轴上的刻度线、刻度<code>label</code>、坐标网格、坐标轴标题。通常你可以独立的配置y轴的左边刻度以及右边的刻度，也可以独立地配置x轴的上边刻度以及下边的刻度。</p>
<p>刻度包括主刻度和次刻度，它们都是Tick刻度对象。</p>
<p><code>Axis</code>也存储了用于自适应，平移以及缩放的<code>data_interval</code>和<code>view_interval</code>。它还有Locator实例和Formatter实例用于控制刻度线的位置以及刻度label。</p>
<p>每个Axis都有一个<code>label</code>属性，也有主刻度列表和次刻度列表。这些<code>ticks</code>是<code>axis.XTick</code>和<code>axis.YTick</code>实例，它们包含着<code>line primitive</code>以及<code>text primitive</code>用来渲染刻度线以及刻度文本。</p>
<p>刻度是动态创建的，只有在需要创建的时候才创建（比如缩放的时候）。Axis也提供了一些辅助方法来获取刻度文本、刻度线位置等等：<br>
常见的如下：</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb390-1"><a href="matplotlib.html#cb390-1" tabindex="-1"></a><span class="co"># 不用print，直接显示结果</span></span>
<span id="cb390-2"><a href="matplotlib.html#cb390-2" tabindex="-1"></a><span class="im">from</span> IPython.core.interactiveshell <span class="im">import</span> InteractiveShell</span>
<span id="cb390-3"><a href="matplotlib.html#cb390-3" tabindex="-1"></a>InteractiveShell.ast_node_interactivity <span class="op">=</span> <span class="st">"all"</span></span>
<span id="cb390-4"><a href="matplotlib.html#cb390-4" tabindex="-1"></a></span>
<span id="cb390-5"><a href="matplotlib.html#cb390-5" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb390-6"><a href="matplotlib.html#cb390-6" tabindex="-1"></a>x <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">5</span>)</span>
<span id="cb390-7"><a href="matplotlib.html#cb390-7" tabindex="-1"></a>y <span class="op">=</span> [<span class="dv">2</span>,<span class="dv">5</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">10</span>]</span>
<span id="cb390-8"><a href="matplotlib.html#cb390-8" tabindex="-1"></a>plt.plot(x, y, <span class="st">'-'</span>)</span>
<span id="cb390-9"><a href="matplotlib.html#cb390-9" tabindex="-1"></a></span>
<span id="cb390-10"><a href="matplotlib.html#cb390-10" tabindex="-1"></a>axis <span class="op">=</span> ax.xaxis <span class="co"># axis为X轴对象</span></span>
<span id="cb390-11"><a href="matplotlib.html#cb390-11" tabindex="-1"></a>axis.get_ticklocs()     <span class="co"># 获取刻度线位置</span></span></code></pre></div>
<pre class="scroll-200"><code>array([-0.5,  0. ,  0.5,  1. ,  1.5,  2. ,  2.5,  3. ,  3.5,  4. ,  4.5])</code></pre>
<div class="sourceCode" id="cb392"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb392-1"><a href="matplotlib.html#cb392-1" tabindex="-1"></a>axis.get_ticklabels()   <span class="co"># 获取刻度label列表(一个Text实例的列表）。 可以通过minor=True|False关键字参数控制输出minor还是major的tick label。</span></span>
<span id="cb392-2"><a href="matplotlib.html#cb392-2" tabindex="-1"></a>axis.get_ticklines()    <span class="co"># 获取刻度线列表(一个Line2D实例的列表）。 可以通过minor=True|False关键字参数控制输出minor还是major的tick line。</span></span>
<span id="cb392-3"><a href="matplotlib.html#cb392-3" tabindex="-1"></a>axis.get_data_interval()<span class="co"># 获取轴刻度间隔</span></span></code></pre></div>
<pre class="scroll-200"><code>array([0., 4.])</code></pre>
<div class="sourceCode" id="cb394"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb394-1"><a href="matplotlib.html#cb394-1" tabindex="-1"></a>axis.get_view_interval()<span class="co"># 获取轴视角（位置）的间隔</span></span></code></pre></div>
<pre class="scroll-200"><code>array([-0.2,  4.2])</code></pre>
<div class="inline-figure"><img src="matplotlib_files/figure-html/axis-container-41.png" width="95%" style="display: block; margin: auto;"></div>
<p>下面的例子展示了如何调整一些轴和刻度的属性(忽略美观度，仅作调整参考)：</p>
<div class="sourceCode" id="cb396"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb396-1"><a href="matplotlib.html#cb396-1" tabindex="-1"></a>fig <span class="op">=</span> plt.figure() <span class="co"># 创建一个新图表</span></span>
<span id="cb396-2"><a href="matplotlib.html#cb396-2" tabindex="-1"></a>rect <span class="op">=</span> fig.patch   <span class="co"># 矩形实例并将其设为黄色</span></span>
<span id="cb396-3"><a href="matplotlib.html#cb396-3" tabindex="-1"></a>rect.set_facecolor(<span class="st">'lightgoldenrodyellow'</span>)</span>
<span id="cb396-4"><a href="matplotlib.html#cb396-4" tabindex="-1"></a></span>
<span id="cb396-5"><a href="matplotlib.html#cb396-5" tabindex="-1"></a>ax1 <span class="op">=</span> fig.add_axes([<span class="fl">0.1</span>, <span class="fl">0.3</span>, <span class="fl">0.4</span>, <span class="fl">0.4</span>]) <span class="co"># 创一个axes对象，从(0.1,0.3)的位置开始，宽和高都为0.4，</span></span>
<span id="cb396-6"><a href="matplotlib.html#cb396-6" tabindex="-1"></a>rect <span class="op">=</span> ax1.patch   <span class="co"># ax1的矩形设为灰色</span></span>
<span id="cb396-7"><a href="matplotlib.html#cb396-7" tabindex="-1"></a>rect.set_facecolor(<span class="st">'lightslategray'</span>)</span>
<span id="cb396-8"><a href="matplotlib.html#cb396-8" tabindex="-1"></a></span>
<span id="cb396-9"><a href="matplotlib.html#cb396-9" tabindex="-1"></a><span class="cf">for</span> label <span class="kw">in</span> ax1.xaxis.get_ticklabels(): </span>
<span id="cb396-10"><a href="matplotlib.html#cb396-10" tabindex="-1"></a>    <span class="co"># 调用x轴刻度标签实例，是一个text实例</span></span>
<span id="cb396-11"><a href="matplotlib.html#cb396-11" tabindex="-1"></a>    label.set_color(<span class="st">'red'</span>) <span class="co"># 颜色</span></span>
<span id="cb396-12"><a href="matplotlib.html#cb396-12" tabindex="-1"></a>    label.set_rotation(<span class="dv">45</span>) <span class="co"># 旋转角度</span></span>
<span id="cb396-13"><a href="matplotlib.html#cb396-13" tabindex="-1"></a>    label.set_fontsize(<span class="dv">16</span>) <span class="co"># 字体大小</span></span>
<span id="cb396-14"><a href="matplotlib.html#cb396-14" tabindex="-1"></a></span>
<span id="cb396-15"><a href="matplotlib.html#cb396-15" tabindex="-1"></a><span class="cf">for</span> line <span class="kw">in</span> ax1.yaxis.get_ticklines():</span>
<span id="cb396-16"><a href="matplotlib.html#cb396-16" tabindex="-1"></a>    <span class="co"># 调用y轴刻度线条实例, 是一个Line2D实例</span></span>
<span id="cb396-17"><a href="matplotlib.html#cb396-17" tabindex="-1"></a>    line.set_markeredgecolor(<span class="st">'green'</span>)    <span class="co"># 颜色</span></span>
<span id="cb396-18"><a href="matplotlib.html#cb396-18" tabindex="-1"></a>    line.set_markersize(<span class="dv">25</span>)    <span class="co"># marker大小</span></span>
<span id="cb396-19"><a href="matplotlib.html#cb396-19" tabindex="-1"></a>    line.set_markeredgewidth(<span class="dv">2</span>)<span class="co"># marker粗细</span></span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/axis-container2-43.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="tick容器" class="section level3" number="6.9.4">
<h3>
<span class="header-section-number">6.9.4</span> Tick容器<a class="anchor" aria-label="anchor" href="#tick%E5%AE%B9%E5%99%A8"><i class="fas fa-link"></i></a>
</h3>
<p><code>matplotlib.axis.Tick</code>是从<code>Figure</code>到<code>Axes</code>到<code>Axis</code>到<code>Tick</code>中最末端的容器对象。<br><code>Tick</code>包含了<code>tick</code>、<code>grid line</code>实例以及对应的<code>label</code>。</p>
<p>所有的这些都可以通过<code>Tick</code>的属性获取，常见的<code>tick</code>属性有<br><code>Tick.tick1line</code>：Line2D实例<br><code>Tick.tick2line</code>：Line2D实例<br><code>Tick.gridline</code>：Line2D实例<br><code>Tick.label1</code>：Text实例<br><code>Tick.label2</code>：Text实例</p>
<p>y轴分为左右两个，因此tick1对应左侧的轴；tick2对应右侧的轴。<br>
x轴分为上下两个，因此tick1对应下侧的轴；tick2对应上侧的轴。</p>
<p>下面的例子展示了，如何将Y轴右边轴设为主轴，并将标签设置为美元符号且为绿色：</p>
<div class="sourceCode" id="cb397"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb397-1"><a href="matplotlib.html#cb397-1" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb397-2"><a href="matplotlib.html#cb397-2" tabindex="-1"></a>ax.plot(<span class="dv">100</span><span class="op">*</span>np.random.rand(<span class="dv">20</span>))</span>
<span id="cb397-3"><a href="matplotlib.html#cb397-3" tabindex="-1"></a></span>
<span id="cb397-4"><a href="matplotlib.html#cb397-4" tabindex="-1"></a><span class="co"># 设置ticker的显示格式</span></span>
<span id="cb397-5"><a href="matplotlib.html#cb397-5" tabindex="-1"></a>formatter <span class="op">=</span> mpl.ticker.FormatStrFormatter(<span class="st">'$</span><span class="sc">%1.2f</span><span class="st">'</span>)</span>
<span id="cb397-6"><a href="matplotlib.html#cb397-6" tabindex="-1"></a>ax.yaxis.set_major_formatter(formatter)</span>
<span id="cb397-7"><a href="matplotlib.html#cb397-7" tabindex="-1"></a></span>
<span id="cb397-8"><a href="matplotlib.html#cb397-8" tabindex="-1"></a><span class="co"># 设置ticker的参数，右侧为主轴，颜色为绿色</span></span>
<span id="cb397-9"><a href="matplotlib.html#cb397-9" tabindex="-1"></a>ax.yaxis.set_tick_params(which<span class="op">=</span><span class="st">'major'</span>, labelcolor<span class="op">=</span><span class="st">'green'</span>,</span>
<span id="cb397-10"><a href="matplotlib.html#cb397-10" tabindex="-1"></a>                         labelleft<span class="op">=</span><span class="va">False</span>, labelright<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb397-11"><a href="matplotlib.html#cb397-11" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/tick-1-45.png" width="95%" style="display: block; margin: auto;"></div>
</div>
</div>
<div id="思考题-1" class="section level2" number="6.10">
<h2>
<span class="header-section-number">6.10</span> 思考题<a class="anchor" aria-label="anchor" href="#%E6%80%9D%E8%80%83%E9%A2%98-1"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li><p>primitives 和 container的区别和联系是什么，分别用于控制可视化图表中的哪些要素</p></li>
<li><p>使用提供的drug数据集，对第一列yyyy和第二列state分组求和，画出下面折线图。PA加粗标黄，其他为灰色。<br>
图标题和横纵坐标轴标题，以及线的文本暂不做要求。</p></li>
</ul>
<div class="inline-figure"><img src="https://img-blog.csdnimg.cn/20210523162430365.png"></div>
<ul>
<li>分别用一组长方形柱和填充面积的方式模仿画出下图，函数 y = -1 * (x - 2) * (x - 8) +10 在区间[2,9]的积分面积<br><img src="https://img-blog.csdnimg.cn/20201126105910781.png"><br><img src="https://img-blog.csdnimg.cn/20201126105910780.png">
</li>
</ul>
</div>
<div id="参考资料" class="section level2" number="6.11">
<h2>
<span class="header-section-number">6.11</span> 参考资料<a class="anchor" aria-label="anchor" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://zhuanlan.zhihu.com/p/32693665">1. matplotlib设计的基本逻辑</a><br><a href="https://www.bookstack.cn/read/huaxiaozhuan-ai/spilt.2.333f5abdbabf383d.md">2. AI算法工程师手册</a></p>
</div>
<div id="子图" class="section level2" number="6.12">
<h2>
<span class="header-section-number">6.12</span> 子图<a class="anchor" aria-label="anchor" href="#%E5%AD%90%E5%9B%BE"><i class="fas fa-link"></i></a>
</h2>
<div id="使用-plt.subplots-绘制均匀状态下的子图" class="section level3" number="6.12.1">
<h3>
<span class="header-section-number">6.12.1</span> 使用 <code>plt.subplots</code> 绘制均匀状态下的子图<a class="anchor" aria-label="anchor" href="#%E4%BD%BF%E7%94%A8-plt.subplots-%E7%BB%98%E5%88%B6%E5%9D%87%E5%8C%80%E7%8A%B6%E6%80%81%E4%B8%8B%E7%9A%84%E5%AD%90%E5%9B%BE"><i class="fas fa-link"></i></a>
</h3>
<p>返回元素分别是画布和子图构成的列表，第一个数字为行，第二个为列，不传入时默认值都为1</p>
<p><code>figsize</code> 参数可以指定整个画布的大小</p>
<p><code>sharex</code> 和 <code>sharey</code> 分别表示是否共享横轴和纵轴刻度</p>
<p><code>tight_layout</code> 函数可以调整子图的相对大小使字符不会重叠</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb398-1"><a href="matplotlib.html#cb398-1" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">5</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">4</span>), sharex<span class="op">=</span><span class="va">True</span>, sharey<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb398-2"><a href="matplotlib.html#cb398-2" tabindex="-1"></a>fig.suptitle(<span class="st">'样例1'</span>, size<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb398-3"><a href="matplotlib.html#cb398-3" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2</span>):</span>
<span id="cb398-4"><a href="matplotlib.html#cb398-4" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>):</span>
<span id="cb398-5"><a href="matplotlib.html#cb398-5" tabindex="-1"></a>        axs[i][j].scatter(np.random.randn(<span class="dv">10</span>), np.random.randn(<span class="dv">10</span>))</span>
<span id="cb398-6"><a href="matplotlib.html#cb398-6" tabindex="-1"></a>        axs[i][j].set_title(<span class="st">'第</span><span class="sc">%d</span><span class="st">行，第</span><span class="sc">%d</span><span class="st">列'</span><span class="op">%</span>(i<span class="op">+</span><span class="dv">1</span>,j<span class="op">+</span><span class="dv">1</span>))</span>
<span id="cb398-7"><a href="matplotlib.html#cb398-7" tabindex="-1"></a>        axs[i][j].set_xlim(<span class="op">-</span><span class="dv">5</span>,<span class="dv">5</span>)</span>
<span id="cb398-8"><a href="matplotlib.html#cb398-8" tabindex="-1"></a>        axs[i][j].set_ylim(<span class="op">-</span><span class="dv">5</span>,<span class="dv">5</span>)</span>
<span id="cb398-9"><a href="matplotlib.html#cb398-9" tabindex="-1"></a>        <span class="cf">if</span> i<span class="op">==</span><span class="dv">1</span>: axs[i][j].set_xlabel(<span class="st">'横坐标'</span>)</span>
<span id="cb398-10"><a href="matplotlib.html#cb398-10" tabindex="-1"></a>        <span class="cf">if</span> j<span class="op">==</span><span class="dv">0</span>: axs[i][j].set_ylabel(<span class="st">'纵坐标'</span>)</span>
<span id="cb398-11"><a href="matplotlib.html#cb398-11" tabindex="-1"></a>fig.tight_layout()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/subplots-1-47.png" width="95%" style="display: block; margin: auto;"></div>
<p><code>subplots</code>是基于OO模式的写法，显式创建一个或多个axes对象，然后在对应的子图对象上进行绘图操作。<br>
还有种方式是使用<code>subplot</code>这样基于pyplot模式的写法，每次在指定位置新建一个子图，并且之后的绘图操作都会指向当前子图，本质上<code>subplot</code>也是<code>Figure.add_subplot</code>的一种封装。</p>
<p>在调用<code>subplot</code>时一般需要传入三位数字，分别代表总行数，总列数，当前子图的index</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb399-1"><a href="matplotlib.html#cb399-1" tabindex="-1"></a>plt.figure()</span>
<span id="cb399-2"><a href="matplotlib.html#cb399-2" tabindex="-1"></a><span class="co"># 子图1</span></span>
<span id="cb399-3"><a href="matplotlib.html#cb399-3" tabindex="-1"></a>plt.subplot(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">1</span>) </span>
<span id="cb399-4"><a href="matplotlib.html#cb399-4" tabindex="-1"></a>plt.plot([<span class="dv">1</span>,<span class="dv">2</span>], <span class="st">'r'</span>)</span>
<span id="cb399-5"><a href="matplotlib.html#cb399-5" tabindex="-1"></a><span class="co"># 子图2</span></span>
<span id="cb399-6"><a href="matplotlib.html#cb399-6" tabindex="-1"></a>plt.subplot(<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb399-7"><a href="matplotlib.html#cb399-7" tabindex="-1"></a>plt.plot([<span class="dv">1</span>,<span class="dv">2</span>], <span class="st">'b'</span>)</span>
<span id="cb399-8"><a href="matplotlib.html#cb399-8" tabindex="-1"></a><span class="co">#子图3</span></span>
<span id="cb399-9"><a href="matplotlib.html#cb399-9" tabindex="-1"></a>plt.subplot(<span class="dv">224</span>)  <span class="co"># 当三位数都小于10时，可以省略中间的逗号，这行命令等价于plt.subplot(2,2,4) </span></span>
<span id="cb399-10"><a href="matplotlib.html#cb399-10" tabindex="-1"></a>plt.plot([<span class="dv">1</span>,<span class="dv">2</span>], <span class="st">'g'</span>)</span>
<span id="cb399-11"><a href="matplotlib.html#cb399-11" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/subplot-49.png" width="95%" style="display: block; margin: auto;"></div>
<p>除了常规的直角坐标系，也可以通过<code>projection</code>方法创建极坐标系下的图表</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb400-1"><a href="matplotlib.html#cb400-1" tabindex="-1"></a>N <span class="op">=</span> <span class="dv">150</span></span>
<span id="cb400-2"><a href="matplotlib.html#cb400-2" tabindex="-1"></a>r <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> np.random.rand(N)</span>
<span id="cb400-3"><a href="matplotlib.html#cb400-3" tabindex="-1"></a>theta <span class="op">=</span> <span class="dv">2</span> <span class="op">*</span> np.pi <span class="op">*</span> np.random.rand(N)</span>
<span id="cb400-4"><a href="matplotlib.html#cb400-4" tabindex="-1"></a>area <span class="op">=</span> <span class="dv">200</span> <span class="op">*</span> r<span class="op">**</span><span class="dv">2</span></span>
<span id="cb400-5"><a href="matplotlib.html#cb400-5" tabindex="-1"></a>colors <span class="op">=</span> theta</span>
<span id="cb400-6"><a href="matplotlib.html#cb400-6" tabindex="-1"></a></span>
<span id="cb400-7"><a href="matplotlib.html#cb400-7" tabindex="-1"></a>plt.subplot(projection<span class="op">=</span><span class="st">'polar'</span>)</span>
<span id="cb400-8"><a href="matplotlib.html#cb400-8" tabindex="-1"></a>plt.scatter(theta, r, c<span class="op">=</span>colors, s<span class="op">=</span>area, cmap<span class="op">=</span><span class="st">'hsv'</span>, alpha<span class="op">=</span><span class="fl">0.75</span>)</span>
<span id="cb400-9"><a href="matplotlib.html#cb400-9" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/projection-51.png" width="95%" style="display: block; margin: auto;"></div>
<p>
请思考如何用极坐标系画出类似的玫瑰图
</p>
<div class="inline-figure"><img src="http://www.hinews.cn/news/pic/003/205/569/00320556959_f01764d0.jpg" width="300" align="bottom"></div>
</div>
<div id="使用-gridspec-绘制非均匀子图" class="section level3" number="6.12.2">
<h3>
<span class="header-section-number">6.12.2</span> 使用 <code>GridSpec</code> 绘制非均匀子图<a class="anchor" aria-label="anchor" href="#%E4%BD%BF%E7%94%A8-gridspec-%E7%BB%98%E5%88%B6%E9%9D%9E%E5%9D%87%E5%8C%80%E5%AD%90%E5%9B%BE"><i class="fas fa-link"></i></a>
</h3>
<p>所谓非均匀包含两层含义，第一是指图的比例大小不同但没有跨行或跨列，第二是指图为跨列或跨行状态</p>
<p>利用 <code>add_gridspec</code> 可以指定相对宽度比例 <code>width_ratios</code> 和相对高度比例参数 <code>height_ratios</code></p>
<div class="sourceCode" id="cb401"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb401-1"><a href="matplotlib.html#cb401-1" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">4</span>))</span>
<span id="cb401-2"><a href="matplotlib.html#cb401-2" tabindex="-1"></a>spec <span class="op">=</span> fig.add_gridspec(nrows<span class="op">=</span><span class="dv">2</span>, ncols<span class="op">=</span><span class="dv">5</span>, width_ratios<span class="op">=</span>[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>], height_ratios<span class="op">=</span>[<span class="dv">1</span>,<span class="dv">3</span>])</span>
<span id="cb401-3"><a href="matplotlib.html#cb401-3" tabindex="-1"></a>fig.suptitle(<span class="st">'样例2'</span>, size<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb401-4"><a href="matplotlib.html#cb401-4" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2</span>):</span>
<span id="cb401-5"><a href="matplotlib.html#cb401-5" tabindex="-1"></a>    <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">5</span>):</span>
<span id="cb401-6"><a href="matplotlib.html#cb401-6" tabindex="-1"></a>        ax <span class="op">=</span> fig.add_subplot(spec[i, j])</span>
<span id="cb401-7"><a href="matplotlib.html#cb401-7" tabindex="-1"></a>        ax.scatter(np.random.randn(<span class="dv">10</span>), np.random.randn(<span class="dv">10</span>))</span>
<span id="cb401-8"><a href="matplotlib.html#cb401-8" tabindex="-1"></a>        ax.set_title(<span class="st">'第</span><span class="sc">%d</span><span class="st">行，第</span><span class="sc">%d</span><span class="st">列'</span><span class="op">%</span>(i<span class="op">+</span><span class="dv">1</span>,j<span class="op">+</span><span class="dv">1</span>))</span>
<span id="cb401-9"><a href="matplotlib.html#cb401-9" tabindex="-1"></a>        <span class="cf">if</span> i<span class="op">==</span><span class="dv">1</span>: ax.set_xlabel(<span class="st">'横坐标'</span>)</span>
<span id="cb401-10"><a href="matplotlib.html#cb401-10" tabindex="-1"></a>        <span class="cf">if</span> j<span class="op">==</span><span class="dv">0</span>: ax.set_ylabel(<span class="st">'纵坐标'</span>)</span>
<span id="cb401-11"><a href="matplotlib.html#cb401-11" tabindex="-1"></a>fig.tight_layout()</span>
<span id="cb401-12"><a href="matplotlib.html#cb401-12" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/add_gridspec-53.png" width="95%" style="display: block; margin: auto;"></div>
<p>在上面的例子中出现了 <code>spec[i, j]</code> 的用法，事实上通过切片就可以实现子图的合并而达到跨图的共能</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb402-1"><a href="matplotlib.html#cb402-1" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">4</span>))</span>
<span id="cb402-2"><a href="matplotlib.html#cb402-2" tabindex="-1"></a>spec <span class="op">=</span> fig.add_gridspec(nrows<span class="op">=</span><span class="dv">2</span>, ncols<span class="op">=</span><span class="dv">6</span>, width_ratios<span class="op">=</span>[<span class="dv">2</span>,<span class="fl">2.5</span>,<span class="dv">3</span>,<span class="dv">1</span>,<span class="fl">1.5</span>,<span class="dv">2</span>], height_ratios<span class="op">=</span>[<span class="dv">1</span>,<span class="dv">2</span>])</span>
<span id="cb402-3"><a href="matplotlib.html#cb402-3" tabindex="-1"></a>fig.suptitle(<span class="st">'样例3'</span>, size<span class="op">=</span><span class="dv">20</span>)</span>
<span id="cb402-4"><a href="matplotlib.html#cb402-4" tabindex="-1"></a><span class="co"># sub1</span></span>
<span id="cb402-5"><a href="matplotlib.html#cb402-5" tabindex="-1"></a>ax <span class="op">=</span> fig.add_subplot(spec[<span class="dv">0</span>, :<span class="dv">3</span>])</span>
<span id="cb402-6"><a href="matplotlib.html#cb402-6" tabindex="-1"></a>ax.scatter(np.random.randn(<span class="dv">10</span>), np.random.randn(<span class="dv">10</span>))</span>
<span id="cb402-7"><a href="matplotlib.html#cb402-7" tabindex="-1"></a><span class="co"># sub2</span></span>
<span id="cb402-8"><a href="matplotlib.html#cb402-8" tabindex="-1"></a>ax <span class="op">=</span> fig.add_subplot(spec[<span class="dv">0</span>, <span class="dv">3</span>:<span class="dv">5</span>])</span>
<span id="cb402-9"><a href="matplotlib.html#cb402-9" tabindex="-1"></a>ax.scatter(np.random.randn(<span class="dv">10</span>), np.random.randn(<span class="dv">10</span>))</span>
<span id="cb402-10"><a href="matplotlib.html#cb402-10" tabindex="-1"></a><span class="co"># sub3</span></span>
<span id="cb402-11"><a href="matplotlib.html#cb402-11" tabindex="-1"></a>ax <span class="op">=</span> fig.add_subplot(spec[:, <span class="dv">5</span>])</span>
<span id="cb402-12"><a href="matplotlib.html#cb402-12" tabindex="-1"></a>ax.scatter(np.random.randn(<span class="dv">10</span>), np.random.randn(<span class="dv">10</span>))</span>
<span id="cb402-13"><a href="matplotlib.html#cb402-13" tabindex="-1"></a><span class="co"># sub4</span></span>
<span id="cb402-14"><a href="matplotlib.html#cb402-14" tabindex="-1"></a>ax <span class="op">=</span> fig.add_subplot(spec[<span class="dv">1</span>, <span class="dv">0</span>])</span>
<span id="cb402-15"><a href="matplotlib.html#cb402-15" tabindex="-1"></a>ax.scatter(np.random.randn(<span class="dv">10</span>), np.random.randn(<span class="dv">10</span>))</span>
<span id="cb402-16"><a href="matplotlib.html#cb402-16" tabindex="-1"></a><span class="co"># sub5</span></span>
<span id="cb402-17"><a href="matplotlib.html#cb402-17" tabindex="-1"></a>ax <span class="op">=</span> fig.add_subplot(spec[<span class="dv">1</span>, <span class="dv">1</span>:<span class="dv">5</span>])</span>
<span id="cb402-18"><a href="matplotlib.html#cb402-18" tabindex="-1"></a>ax.scatter(np.random.randn(<span class="dv">10</span>), np.random.randn(<span class="dv">10</span>))</span>
<span id="cb402-19"><a href="matplotlib.html#cb402-19" tabindex="-1"></a>fig.tight_layout()</span>
<span id="cb402-20"><a href="matplotlib.html#cb402-20" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/add_gridspec2-55.png" width="95%" style="display: block; margin: auto;"></div>
</div>
</div>
<div id="子图上的方法" class="section level2" number="6.13">
<h2>
<span class="header-section-number">6.13</span> 子图上的方法<a class="anchor" aria-label="anchor" href="#%E5%AD%90%E5%9B%BE%E4%B8%8A%E7%9A%84%E6%96%B9%E6%B3%95"><i class="fas fa-link"></i></a>
</h2>
<p>补充介绍一些子图上的方法</p>
<p>常用直线的画法为： <code>axhline, axvline, axline</code> （水平、垂直、任意方向）</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb403-1"><a href="matplotlib.html#cb403-1" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">4</span>,<span class="dv">3</span>))</span>
<span id="cb403-2"><a href="matplotlib.html#cb403-2" tabindex="-1"></a>ax.axhline(<span class="fl">0.5</span>,<span class="fl">0.2</span>,<span class="fl">0.8</span>)</span>
<span id="cb403-3"><a href="matplotlib.html#cb403-3" tabindex="-1"></a>ax.axvline(<span class="fl">0.5</span>,<span class="fl">0.2</span>,<span class="fl">0.8</span>)</span>
<span id="cb403-4"><a href="matplotlib.html#cb403-4" tabindex="-1"></a>ax.axline([<span class="fl">0.3</span>,<span class="fl">0.3</span>],[<span class="fl">0.7</span>,<span class="fl">0.7</span>])</span>
<span id="cb403-5"><a href="matplotlib.html#cb403-5" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/subplot-method-1-57.png" width="95%" style="display: block; margin: auto;"></div>
<p>使用 <code>grid</code> 可以加灰色网格</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb404-1"><a href="matplotlib.html#cb404-1" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">4</span>,<span class="dv">3</span>))</span>
<span id="cb404-2"><a href="matplotlib.html#cb404-2" tabindex="-1"></a>ax.grid(<span class="va">True</span>)</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/subplot-method-2-59.png" width="95%" style="display: block; margin: auto;"></div>
<p>使用 <code>set_xscale</code> 可以设置坐标轴的规度（指对数坐标等）</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb405-1"><a href="matplotlib.html#cb405-1" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">4</span>))</span>
<span id="cb405-2"><a href="matplotlib.html#cb405-2" tabindex="-1"></a><span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2</span>):</span>
<span id="cb405-3"><a href="matplotlib.html#cb405-3" tabindex="-1"></a>    axs[j].plot(<span class="bu">list</span>(<span class="st">'abcd'</span>), [<span class="dv">10</span><span class="op">**</span>i <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">4</span>)])</span>
<span id="cb405-4"><a href="matplotlib.html#cb405-4" tabindex="-1"></a>    <span class="cf">if</span> j<span class="op">==</span><span class="dv">0</span>:</span>
<span id="cb405-5"><a href="matplotlib.html#cb405-5" tabindex="-1"></a>        axs[j].set_yscale(<span class="st">'log'</span>)</span>
<span id="cb405-6"><a href="matplotlib.html#cb405-6" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb405-7"><a href="matplotlib.html#cb405-7" tabindex="-1"></a>        <span class="cf">pass</span></span>
<span id="cb405-8"><a href="matplotlib.html#cb405-8" tabindex="-1"></a>fig.tight_layout()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/set-xscale-61.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="思考题-2" class="section level2" number="6.14">
<h2>
<span class="header-section-number">6.14</span> 思考题<a class="anchor" aria-label="anchor" href="#%E6%80%9D%E8%80%83%E9%A2%98-2"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>墨尔本1981年至1990年的每月温度情况</li>
</ul>
<p>数据集来自github仓库下data/layout_ex1.csv<br>
请利用数据，画出如下的图：</p>
<div class="inline-figure"><img src="https://s1.ax1x.com/2020/11/01/BwvCse.png" width="800" align="bottom"></div>
<ul>
<li>画出数据的散点图和边际分布</li>
</ul>
<p>用 <code>np.random.randn(2, 150)</code> 生成一组二维数据，使用两种非均匀子图的分割方法，做出该数据对应的散点图和边际分布图</p>
<div class="inline-figure"><img src="https://s1.ax1x.com/2020/11/01/B0pEnS.png" width="400" height="400" align="bottom"></div>
</div>
<div id="figure和axes上的文本" class="section level2" number="6.15">
<h2>
<span class="header-section-number">6.15</span> Figure和Axes上的文本<a class="anchor" aria-label="anchor" href="#figure%E5%92%8Caxes%E4%B8%8A%E7%9A%84%E6%96%87%E6%9C%AC"><i class="fas fa-link"></i></a>
</h2>
<p>Matplotlib具有广泛的文本支持，包括对数学表达式的支持、对栅格和矢量输出的TrueType支持、具有任意旋转的换行分隔文本以及Unicode支持。</p>
<div id="文本api示例" class="section level3" number="6.15.1">
<h3>
<span class="header-section-number">6.15.1</span> 文本API示例<a class="anchor" aria-label="anchor" href="#%E6%96%87%E6%9C%ACapi%E7%A4%BA%E4%BE%8B"><i class="fas fa-link"></i></a>
</h3>
<p>下面的命令是介绍了通过pyplot API和objected-oriented API分别创建文本的方式。</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="34%">
<col width="24%">
<col width="41%">
</colgroup>
<thead><tr class="header">
<th>pyplot API</th>
<th>OO API</th>
<th>description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>text</code></td>
<td><code>text</code></td>
<td>在子图axes的任意位置添加文本</td>
</tr>
<tr class="even">
<td><code>annotate</code></td>
<td><code>annotate</code></td>
<td>在子图axes的任意位置添加注解，包含指向性的箭头</td>
</tr>
<tr class="odd">
<td><code>xlabel</code></td>
<td><code>set_xlabel</code></td>
<td>为子图axes添加x轴标签</td>
</tr>
<tr class="even">
<td><code>ylabel</code></td>
<td><code>set_ylabel</code></td>
<td>为子图axes添加y轴标签</td>
</tr>
<tr class="odd">
<td><code>title</code></td>
<td><code>set_title</code></td>
<td>为子图axes添加标题</td>
</tr>
<tr class="even">
<td><code>figtext</code></td>
<td><code>text</code></td>
<td>在画布figure的任意位置添加文本</td>
</tr>
<tr class="odd">
<td><code>suptitle</code></td>
<td><code>suptitle</code></td>
<td>为画布figure添加标题</td>
</tr>
</tbody>
</table></div>
<p>通过一个综合例子，以OO模式展示这些API是如何控制一个图像中各部分的文本，在之后的章节我们再详细分析这些api的使用技巧</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb406-1"><a href="matplotlib.html#cb406-1" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span>
<span id="cb406-2"><a href="matplotlib.html#cb406-2" tabindex="-1"></a>ax <span class="op">=</span> fig.add_subplot()</span>
<span id="cb406-3"><a href="matplotlib.html#cb406-3" tabindex="-1"></a></span>
<span id="cb406-4"><a href="matplotlib.html#cb406-4" tabindex="-1"></a><span class="co"># 分别为figure和ax设置标题，注意两者的位置是不同的</span></span>
<span id="cb406-5"><a href="matplotlib.html#cb406-5" tabindex="-1"></a>fig.suptitle(<span class="st">'bold figure suptitle'</span>, fontsize<span class="op">=</span><span class="dv">14</span>, fontweight<span class="op">=</span><span class="st">'bold'</span>)</span>
<span id="cb406-6"><a href="matplotlib.html#cb406-6" tabindex="-1"></a>ax.set_title(<span class="st">'axes title'</span>)</span>
<span id="cb406-7"><a href="matplotlib.html#cb406-7" tabindex="-1"></a></span>
<span id="cb406-8"><a href="matplotlib.html#cb406-8" tabindex="-1"></a><span class="co"># 设置x和y轴标签</span></span>
<span id="cb406-9"><a href="matplotlib.html#cb406-9" tabindex="-1"></a>ax.set_xlabel(<span class="st">'xlabel'</span>)</span>
<span id="cb406-10"><a href="matplotlib.html#cb406-10" tabindex="-1"></a>ax.set_ylabel(<span class="st">'ylabel'</span>)</span>
<span id="cb406-11"><a href="matplotlib.html#cb406-11" tabindex="-1"></a></span>
<span id="cb406-12"><a href="matplotlib.html#cb406-12" tabindex="-1"></a><span class="co"># 设置x和y轴显示范围均为0到10</span></span>
<span id="cb406-13"><a href="matplotlib.html#cb406-13" tabindex="-1"></a>ax.axis([<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">0</span>, <span class="dv">10</span>])</span></code></pre></div>
<pre class="scroll-200"><code>(0.0, 10.0, 0.0, 10.0)</code></pre>
<div class="sourceCode" id="cb408"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb408-1"><a href="matplotlib.html#cb408-1" tabindex="-1"></a><span class="co"># 在子图上添加文本</span></span>
<span id="cb408-2"><a href="matplotlib.html#cb408-2" tabindex="-1"></a>ax.text(<span class="dv">3</span>, <span class="dv">8</span>, <span class="st">'boxed italics text in data coords'</span>, style<span class="op">=</span><span class="st">'italic'</span>,</span>
<span id="cb408-3"><a href="matplotlib.html#cb408-3" tabindex="-1"></a>        bbox<span class="op">=</span>{<span class="st">'facecolor'</span>: <span class="st">'red'</span>, <span class="st">'alpha'</span>: <span class="fl">0.5</span>, <span class="st">'pad'</span>: <span class="dv">10</span>})</span>
<span id="cb408-4"><a href="matplotlib.html#cb408-4" tabindex="-1"></a></span>
<span id="cb408-5"><a href="matplotlib.html#cb408-5" tabindex="-1"></a><span class="co"># 在画布上添加文本，一般在子图上添加文本是更常见的操作，这种方法很少用</span></span>
<span id="cb408-6"><a href="matplotlib.html#cb408-6" tabindex="-1"></a>fig.text(<span class="fl">0.4</span>,<span class="fl">0.8</span>,<span class="st">'This is text for figure'</span>)</span>
<span id="cb408-7"><a href="matplotlib.html#cb408-7" tabindex="-1"></a></span>
<span id="cb408-8"><a href="matplotlib.html#cb408-8" tabindex="-1"></a>ax.plot([<span class="dv">2</span>], [<span class="dv">1</span>], <span class="st">'o'</span>)</span>
<span id="cb408-9"><a href="matplotlib.html#cb408-9" tabindex="-1"></a><span class="co"># 添加注解</span></span>
<span id="cb408-10"><a href="matplotlib.html#cb408-10" tabindex="-1"></a>ax.annotate(<span class="st">'annotate'</span>, xy<span class="op">=</span>(<span class="dv">2</span>, <span class="dv">1</span>), xytext<span class="op">=</span>(<span class="dv">3</span>, <span class="dv">4</span>),arrowprops<span class="op">=</span><span class="bu">dict</span>(facecolor<span class="op">=</span><span class="st">'black'</span>, shrink<span class="op">=</span><span class="fl">0.05</span>))</span>
<span id="cb408-11"><a href="matplotlib.html#cb408-11" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/text-api-63.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="text---子图上的文本" class="section level3" number="6.15.2">
<h3>
<span class="header-section-number">6.15.2</span> text - 子图上的文本<a class="anchor" aria-label="anchor" href="#text---%E5%AD%90%E5%9B%BE%E4%B8%8A%E7%9A%84%E6%96%87%E6%9C%AC"><i class="fas fa-link"></i></a>
</h3>
<p>text的调用方式为<code>Axes.text(x, y, s, fontdict=None, **kwargs)</code><br>
其中<code>x</code>,<code>y</code>为文本出现的位置，默认状态下即为当前坐标系下的坐标值，<br><code>s</code>为文本的内容，<br><code>fontdict</code>是可选参数，用于覆盖默认的文本属性，<br><code>**kwargs</code>为关键字参数，也可以用于传入文本样式参数</p>
<p>重点解释下fontdict和**kwargs参数，这两种方式都可以用于调整呈现的文本样式，最终效果是一样的，不仅text方法，其他文本方法如set_xlabel,set_title等同样适用这两种方式修改样式。通过一个例子演示这两种方法是如何使用的。</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb409-1"><a href="matplotlib.html#cb409-1" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">3</span>))</span>
<span id="cb409-2"><a href="matplotlib.html#cb409-2" tabindex="-1"></a>axes <span class="op">=</span> fig.subplots(<span class="dv">1</span>,<span class="dv">2</span>)</span>
<span id="cb409-3"><a href="matplotlib.html#cb409-3" tabindex="-1"></a></span>
<span id="cb409-4"><a href="matplotlib.html#cb409-4" tabindex="-1"></a><span class="co"># 使用关键字参数修改文本样式</span></span>
<span id="cb409-5"><a href="matplotlib.html#cb409-5" tabindex="-1"></a>axes[<span class="dv">0</span>].text(<span class="fl">0.3</span>, <span class="fl">0.8</span>, <span class="st">'modify by **kwargs'</span>, style<span class="op">=</span><span class="st">'italic'</span>,</span>
<span id="cb409-6"><a href="matplotlib.html#cb409-6" tabindex="-1"></a>        bbox<span class="op">=</span>{<span class="st">'facecolor'</span>: <span class="st">'red'</span>, <span class="st">'alpha'</span>: <span class="fl">0.5</span>, <span class="st">'pad'</span>: <span class="dv">10</span>})<span class="op">;</span></span>
<span id="cb409-7"><a href="matplotlib.html#cb409-7" tabindex="-1"></a></span>
<span id="cb409-8"><a href="matplotlib.html#cb409-8" tabindex="-1"></a><span class="co"># 使用fontdict参数修改文本样式</span></span>
<span id="cb409-9"><a href="matplotlib.html#cb409-9" tabindex="-1"></a>font <span class="op">=</span> {<span class="st">'bbox'</span>:{<span class="st">'facecolor'</span>: <span class="st">'red'</span>, <span class="st">'alpha'</span>: <span class="fl">0.5</span>, <span class="st">'pad'</span>: <span class="dv">10</span>}, <span class="st">'style'</span>:<span class="st">'italic'</span>}</span>
<span id="cb409-10"><a href="matplotlib.html#cb409-10" tabindex="-1"></a>axes[<span class="dv">1</span>].text(<span class="fl">0.3</span>, <span class="fl">0.8</span>, <span class="st">'modify by fontdict'</span>, fontdict<span class="op">=</span>font)</span>
<span id="cb409-11"><a href="matplotlib.html#cb409-11" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/subplot-text-65.png" width="95%" style="display: block; margin: auto;"></div>
<p>matplotlib中所有支持的样式参数请参考<a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.axes.Axes.text.html#matplotlib.axes.Axes.text">官网文档说明</a>，大多数时候需要用到的时候再查询即可。</p>
<p>下表列举了一些常用的参数供参考。</p>
<div class="inline-table"><table class="table table-sm">
<colgroup>
<col width="47%">
<col width="52%">
</colgroup>
<thead><tr class="header">
<th>Property</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>alpha</code></td>
<td align="left">float or None 透明度，越接近0越透明，越接近1越不透明</td>
</tr>
<tr class="even">
<td><code>backgroundcolor</code></td>
<td align="left">color 文本的背景颜色</td>
</tr>
<tr class="odd">
<td><code>bbox</code></td>
<td align="left">dict with properties for patches.FancyBboxPatch 用来设置text周围的box外框</td>
</tr>
<tr class="even">
<td>
<code>color</code> or c</td>
<td align="left">color 字体的颜色</td>
</tr>
<tr class="odd">
<td>
<code>fontfamily</code> or family</td>
<td align="left">{FONTNAME, ‘serif’, ‘sans-serif’, ‘cursive’, ‘fantasy’, ‘monospace’} 字体的类型</td>
</tr>
<tr class="even">
<td>
<code>fontsize</code> or size</td>
<td align="left">float or {‘xx-small’, ‘x-small’, ‘small’, ‘medium’, ‘large’, ‘x-large’, ‘xx-large’} 字体大小</td>
</tr>
<tr class="odd">
<td>
<code>fontstyle</code> or style</td>
<td align="left">{‘normal’, ‘italic’, ‘oblique’} 字体的样式是否倾斜等</td>
</tr>
<tr class="even">
<td>
<code>fontweight</code> or weight</td>
<td align="left">{a numeric value in range 0-1000, ‘ultralight’, ‘light’, ‘normal’, ‘regular’, ‘book’, ‘medium’, ‘roman’, ‘semibold’, ‘demibold’, ‘demi’, ‘bold’, ‘heavy’, ‘extra bold’, ‘black’} 文本粗细</td>
</tr>
<tr class="odd">
<td>
<code>horizontalalignment</code> or ha</td>
<td align="left">{‘center’, ‘right’, ‘left’} 选择文本左对齐右对齐还是居中对齐</td>
</tr>
<tr class="even">
<td><code>linespacing</code></td>
<td align="left">float (multiple of font size) 文本间距</td>
</tr>
<tr class="odd">
<td><code>rotation</code></td>
<td align="left">float or {‘vertical’, ‘horizontal’} 指text逆时针旋转的角度，“horizontal”等于0，“vertical”等于90</td>
</tr>
<tr class="even">
<td>
<code>verticalalignment</code> or va</td>
<td align="left">{‘center’, ‘top’, ‘bottom’, ‘baseline’, ‘center_baseline’} 文本在垂直角度的对齐方式</td>
</tr>
</tbody>
</table></div>
</div>
<div id="xlabel和ylabel---子图的xy轴标签" class="section level3" number="6.15.3">
<h3>
<span class="header-section-number">6.15.3</span> xlabel和ylabel - 子图的x，y轴标签<a class="anchor" aria-label="anchor" href="#xlabel%E5%92%8Cylabel---%E5%AD%90%E5%9B%BE%E7%9A%84xy%E8%BD%B4%E6%A0%87%E7%AD%BE"><i class="fas fa-link"></i></a>
</h3>
<p>xlabel的调用方式为<code>Axes.set_xlabel(xlabel, fontdict=None, labelpad=None, *, loc=None, **kwargs)</code><br>
ylabel方式类似，这里不重复写出。<br>
其中<code>xlabel</code>即为标签内容,<br><code>fontdict</code>和<code>**kwargs</code>用来修改样式，上一小节已介绍,<br><code>labelpad</code>为标签和坐标轴的距离，默认为4，<br><code>loc</code>为标签位置，可选的值为’left’, ‘center’, ’right’之一，默认为居中</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb410-1"><a href="matplotlib.html#cb410-1" tabindex="-1"></a><span class="co"># 观察labelpad和loc参数的使用效果</span></span>
<span id="cb410-2"><a href="matplotlib.html#cb410-2" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">3</span>))</span>
<span id="cb410-3"><a href="matplotlib.html#cb410-3" tabindex="-1"></a>axes <span class="op">=</span> fig.subplots(<span class="dv">1</span>,<span class="dv">2</span>)</span>
<span id="cb410-4"><a href="matplotlib.html#cb410-4" tabindex="-1"></a>axes[<span class="dv">0</span>].set_xlabel(<span class="st">'xlabel'</span>,labelpad<span class="op">=</span><span class="dv">20</span>,loc<span class="op">=</span><span class="st">'left'</span>)</span>
<span id="cb410-5"><a href="matplotlib.html#cb410-5" tabindex="-1"></a></span>
<span id="cb410-6"><a href="matplotlib.html#cb410-6" tabindex="-1"></a><span class="co"># loc参数仅能提供粗略的位置调整，如果想要更精确的设置标签的位置，可以使用position参数+horizontalalignment参数来定位</span></span>
<span id="cb410-7"><a href="matplotlib.html#cb410-7" tabindex="-1"></a><span class="co"># position由一个元组过程，第一个元素0.2表示x轴标签在x轴的位置，第二个元素对于xlabel其实是无意义的，随便填一个数都可以</span></span>
<span id="cb410-8"><a href="matplotlib.html#cb410-8" tabindex="-1"></a><span class="co"># horizontalalignment='left'表示左对齐，这样设置后x轴标签就能精确定位在x=0.2的位置处</span></span>
<span id="cb410-9"><a href="matplotlib.html#cb410-9" tabindex="-1"></a>axes[<span class="dv">1</span>].set_xlabel(<span class="st">'xlabel'</span>, position<span class="op">=</span>(<span class="fl">0.2</span>, _), horizontalalignment<span class="op">=</span><span class="st">'left'</span>)</span>
<span id="cb410-10"><a href="matplotlib.html#cb410-10" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/xylabel-67.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="title和suptitle---子图和画布的标题" class="section level3" number="6.15.4">
<h3>
<span class="header-section-number">6.15.4</span> title和suptitle - 子图和画布的标题<a class="anchor" aria-label="anchor" href="#title%E5%92%8Csuptitle---%E5%AD%90%E5%9B%BE%E5%92%8C%E7%94%BB%E5%B8%83%E7%9A%84%E6%A0%87%E9%A2%98"><i class="fas fa-link"></i></a>
</h3>
<p>title的调用方式为<code>Axes.set_title(label, fontdict=None, loc=None, pad=None, *, y=None, **kwargs)</code><br>
其中label为子图标签的内容，<code>fontdict</code>,<code>loc</code>,<code>**kwargs</code>和之前小节相同不重复介绍<br><code>pad</code>是指标题偏离图表顶部的距离，默认为6<br><code>y</code>是title所在子图垂向的位置。默认值为1，即title位于子图的顶部。</p>
<p>suptitle的调用方式为<code>figure.suptitle(t, **kwargs)</code><br>
其中<code>t</code>为画布的标题内容</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb411-1"><a href="matplotlib.html#cb411-1" tabindex="-1"></a><span class="co"># 观察pad参数的使用效果</span></span>
<span id="cb411-2"><a href="matplotlib.html#cb411-2" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">3</span>))</span>
<span id="cb411-3"><a href="matplotlib.html#cb411-3" tabindex="-1"></a>fig.suptitle(<span class="st">'This is figure title'</span>,y<span class="op">=</span><span class="fl">1.2</span>) <span class="co"># 通过参数y设置高度</span></span>
<span id="cb411-4"><a href="matplotlib.html#cb411-4" tabindex="-1"></a>axes <span class="op">=</span> fig.subplots(<span class="dv">1</span>,<span class="dv">2</span>)</span>
<span id="cb411-5"><a href="matplotlib.html#cb411-5" tabindex="-1"></a>axes[<span class="dv">0</span>].set_title(<span class="st">'This is title'</span>,pad<span class="op">=</span><span class="dv">15</span>)</span>
<span id="cb411-6"><a href="matplotlib.html#cb411-6" tabindex="-1"></a>axes[<span class="dv">1</span>].set_title(<span class="st">'This is title'</span>,pad<span class="op">=</span><span class="dv">6</span>)</span>
<span id="cb411-7"><a href="matplotlib.html#cb411-7" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/title-69.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="annotate---子图的注解" class="section level3" number="6.15.5">
<h3>
<span class="header-section-number">6.15.5</span> annotate - 子图的注解<a class="anchor" aria-label="anchor" href="#annotate---%E5%AD%90%E5%9B%BE%E7%9A%84%E6%B3%A8%E8%A7%A3"><i class="fas fa-link"></i></a>
</h3>
<p>annotate的调用方式为<code>Axes.annotate(text, xy, *args, **kwargs)</code><br>
其中<code>text</code>为注解的内容，<br><code>xy</code>为注解箭头指向的坐标，<br>
其他常用的参数包括：<br><code>xytext</code>为注解文字的坐标，<br><code>xycoords</code>用来定义xy参数的坐标系，<br><code>textcoords</code>用来定义xytext参数的坐标系，<br><code>arrowprops</code>用来定义指向箭头的样式</p>
<p>annotate的参数非常复杂，这里仅仅展示一个简单的例子，更多参数可以查看<a href="https://matplotlib.org/stable/tutorials/text/annotations.html#plotting-guide-annotation">官方文档中的annotate介绍</a></p>
<div class="sourceCode" id="cb412"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb412-1"><a href="matplotlib.html#cb412-1" tabindex="-1"></a>fig <span class="op">=</span> plt.figure()</span>
<span id="cb412-2"><a href="matplotlib.html#cb412-2" tabindex="-1"></a>ax <span class="op">=</span> fig.add_subplot()</span>
<span id="cb412-3"><a href="matplotlib.html#cb412-3" tabindex="-1"></a>ax.annotate(<span class="st">""</span>,</span>
<span id="cb412-4"><a href="matplotlib.html#cb412-4" tabindex="-1"></a>            xy<span class="op">=</span>(<span class="fl">0.2</span>, <span class="fl">0.2</span>), xycoords<span class="op">=</span><span class="st">'data'</span>,</span>
<span id="cb412-5"><a href="matplotlib.html#cb412-5" tabindex="-1"></a>            xytext<span class="op">=</span>(<span class="fl">0.8</span>, <span class="fl">0.8</span>), textcoords<span class="op">=</span><span class="st">'data'</span>,</span>
<span id="cb412-6"><a href="matplotlib.html#cb412-6" tabindex="-1"></a>            arrowprops<span class="op">=</span><span class="bu">dict</span>(arrowstyle<span class="op">=</span><span class="st">"-&gt;"</span>, connectionstyle<span class="op">=</span><span class="st">"arc3,rad=0.2"</span>)</span>
<span id="cb412-7"><a href="matplotlib.html#cb412-7" tabindex="-1"></a>            )</span>
<span id="cb412-8"><a href="matplotlib.html#cb412-8" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/annotate-71.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="字体的属性设置" class="section level3" number="6.15.6">
<h3>
<span class="header-section-number">6.15.6</span> 字体的属性设置<a class="anchor" aria-label="anchor" href="#%E5%AD%97%E4%BD%93%E7%9A%84%E5%B1%9E%E6%80%A7%E8%AE%BE%E7%BD%AE"><i class="fas fa-link"></i></a>
</h3>
<p>字体设置一般有全局字体设置和自定义局部字体设置两种方法。</p>
<p><a href="https://www.cnblogs.com/chendc/p/9298832.html">为方便在图中加入合适的字体，可以尝试了解中文字体的英文名称,该链接告诉了常用中文的英文名称</a></p>
<div class="sourceCode" id="cb413"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb413-1"><a href="matplotlib.html#cb413-1" tabindex="-1"></a><span class="co">#该block讲述如何在matplotlib里面，修改字体默认属性，完成全局字体的更改。</span></span>
<span id="cb413-2"><a href="matplotlib.html#cb413-2" tabindex="-1"></a>plt.rcParams[<span class="st">'font.sans-serif'</span>] <span class="op">=</span> [<span class="st">'SimSun'</span>]    <span class="co"># 指定默认字体为新宋体。</span></span>
<span id="cb413-3"><a href="matplotlib.html#cb413-3" tabindex="-1"></a>plt.rcParams[<span class="st">'axes.unicode_minus'</span>] <span class="op">=</span> <span class="va">False</span>      <span class="co"># 解决保存图像时 负号'-' 显示为方块和报错的问题。</span></span></code></pre></div>
<div class="sourceCode" id="cb414"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb414-1"><a href="matplotlib.html#cb414-1" tabindex="-1"></a><span class="co">#局部字体的修改方法1</span></span>
<span id="cb414-2"><a href="matplotlib.html#cb414-2" tabindex="-1"></a>x <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>]</span>
<span id="cb414-3"><a href="matplotlib.html#cb414-3" tabindex="-1"></a>plt.plot(x, label<span class="op">=</span><span class="st">'小示例图标签'</span>)</span>
<span id="cb414-4"><a href="matplotlib.html#cb414-4" tabindex="-1"></a></span>
<span id="cb414-5"><a href="matplotlib.html#cb414-5" tabindex="-1"></a><span class="co"># 直接用字体的名字</span></span>
<span id="cb414-6"><a href="matplotlib.html#cb414-6" tabindex="-1"></a>plt.xlabel(<span class="st">'x 轴名称参数'</span>, fontproperties<span class="op">=</span><span class="st">'Microsoft YaHei'</span>, fontsize<span class="op">=</span><span class="dv">16</span>)         <span class="co"># 设置x轴名称，采用微软雅黑字体</span></span>
<span id="cb414-7"><a href="matplotlib.html#cb414-7" tabindex="-1"></a>plt.ylabel(<span class="st">'y 轴名称参数'</span>, fontproperties<span class="op">=</span><span class="st">'Microsoft YaHei'</span>, fontsize<span class="op">=</span><span class="dv">14</span>)         <span class="co"># 设置Y轴名称</span></span>
<span id="cb414-8"><a href="matplotlib.html#cb414-8" tabindex="-1"></a>plt.title(<span class="st">'坐标系的标题'</span>,  fontproperties<span class="op">=</span><span class="st">'Microsoft YaHei'</span>, fontsize<span class="op">=</span><span class="dv">20</span>)         <span class="co"># 设置坐标系标题的字体</span></span>
<span id="cb414-9"><a href="matplotlib.html#cb414-9" tabindex="-1"></a>plt.legend(loc<span class="op">=</span><span class="st">'lower right'</span>, prop<span class="op">=</span>{<span class="st">"family"</span>: <span class="st">'Microsoft YaHei'</span>}, fontsize<span class="op">=</span><span class="dv">10</span>) </span>
<span id="cb414-10"><a href="matplotlib.html#cb414-10" tabindex="-1"></a>plt.show()   <span class="co"># 小示例图的字体设置</span></span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/font-1-73.png" width="95%" style="display: block; margin: auto;"></div>
</div>
</div>
<div id="tick上的文本" class="section level2" number="6.16">
<h2>
<span class="header-section-number">6.16</span> Tick上的文本<a class="anchor" aria-label="anchor" href="#tick%E4%B8%8A%E7%9A%84%E6%96%87%E6%9C%AC"><i class="fas fa-link"></i></a>
</h2>
<p>设置tick（刻度）和ticklabel（刻度标签）也是可视化中经常需要操作的步骤，matplotlib既提供了自动生成刻度和刻度标签的模式（默认状态），同时也提供了许多让使用者灵活设置的方式。</p>
<div id="简单模式" class="section level3" number="6.16.1">
<h3>
<span class="header-section-number">6.16.1</span> 简单模式<a class="anchor" aria-label="anchor" href="#%E7%AE%80%E5%8D%95%E6%A8%A1%E5%BC%8F"><i class="fas fa-link"></i></a>
</h3>
<p>可以使用axis的<code>set_ticks</code>方法手动设置标签位置，使用axis的<code>set_ticklabels</code>方法手动设置标签格式</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb415-1"><a href="matplotlib.html#cb415-1" tabindex="-1"></a>x1 <span class="op">=</span> np.linspace(<span class="fl">0.0</span>, <span class="fl">5.0</span>, <span class="dv">100</span>)</span>
<span id="cb415-2"><a href="matplotlib.html#cb415-2" tabindex="-1"></a>y1 <span class="op">=</span> np.cos(<span class="dv">2</span> <span class="op">*</span> np.pi <span class="op">*</span> x1) <span class="op">*</span> np.exp(<span class="op">-</span>x1)</span></code></pre></div>
<div class="sourceCode" id="cb416"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb416-1"><a href="matplotlib.html#cb416-1" tabindex="-1"></a><span class="co"># 使用axis的set_ticks方法手动设置标签位置的例子，该案例中由于tick设置过大，所以会影响绘图美观，不建议用此方式进行设置tick</span></span>
<span id="cb416-2"><a href="matplotlib.html#cb416-2" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">5</span>, <span class="dv">3</span>), tight_layout<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb416-3"><a href="matplotlib.html#cb416-3" tabindex="-1"></a>axs[<span class="dv">0</span>].plot(x1, y1)</span>
<span id="cb416-4"><a href="matplotlib.html#cb416-4" tabindex="-1"></a>axs[<span class="dv">1</span>].plot(x1, y1)</span>
<span id="cb416-5"><a href="matplotlib.html#cb416-5" tabindex="-1"></a>axs[<span class="dv">1</span>].xaxis.set_ticks(np.arange(<span class="fl">0.</span>, <span class="fl">10.1</span>, <span class="fl">2.</span>))</span>
<span id="cb416-6"><a href="matplotlib.html#cb416-6" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/set_ticks2-75.png" width="95%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb417"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb417-1"><a href="matplotlib.html#cb417-1" tabindex="-1"></a><span class="co"># 使用axis的set_ticklabels方法手动设置标签格式的例子</span></span>
<span id="cb417-2"><a href="matplotlib.html#cb417-2" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">5</span>, <span class="dv">3</span>), tight_layout<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb417-3"><a href="matplotlib.html#cb417-3" tabindex="-1"></a>axs[<span class="dv">0</span>].plot(x1, y1)</span>
<span id="cb417-4"><a href="matplotlib.html#cb417-4" tabindex="-1"></a>axs[<span class="dv">1</span>].plot(x1, y1)</span>
<span id="cb417-5"><a href="matplotlib.html#cb417-5" tabindex="-1"></a>ticks <span class="op">=</span> np.arange(<span class="fl">0.</span>, <span class="fl">8.1</span>, <span class="fl">2.</span>)</span>
<span id="cb417-6"><a href="matplotlib.html#cb417-6" tabindex="-1"></a>tickla <span class="op">=</span> [<span class="ss">f'</span><span class="sc">{</span>tick<span class="sc">:1.2f}</span><span class="ss">'</span> <span class="cf">for</span> tick <span class="kw">in</span> ticks]</span>
<span id="cb417-7"><a href="matplotlib.html#cb417-7" tabindex="-1"></a>axs[<span class="dv">1</span>].xaxis.set_ticks(ticks)</span>
<span id="cb417-8"><a href="matplotlib.html#cb417-8" tabindex="-1"></a>axs[<span class="dv">1</span>].xaxis.set_ticklabels(tickla)</span>
<span id="cb417-9"><a href="matplotlib.html#cb417-9" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/set_ticklabel-77.png" width="95%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb418"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb418-1"><a href="matplotlib.html#cb418-1" tabindex="-1"></a><span class="co">#一般绘图时会自动创建刻度，而如果通过上面的例子使用set_ticks创建刻度可能会导致tick的范围与所绘制图形的范围不一致的问题。</span></span>
<span id="cb418-2"><a href="matplotlib.html#cb418-2" tabindex="-1"></a><span class="co">#所以在下面的案例中，axs[1]中set_xtick的设置要与数据范围所对应，然后再通过set_xticklabels设置刻度所对应的标签</span></span>
<span id="cb418-3"><a href="matplotlib.html#cb418-3" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb418-4"><a href="matplotlib.html#cb418-4" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb418-5"><a href="matplotlib.html#cb418-5" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">1</span>, figsize<span class="op">=</span>(<span class="dv">6</span>, <span class="dv">4</span>), tight_layout<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb418-6"><a href="matplotlib.html#cb418-6" tabindex="-1"></a>x1 <span class="op">=</span> np.linspace(<span class="fl">0.0</span>, <span class="fl">6.0</span>, <span class="dv">100</span>)</span>
<span id="cb418-7"><a href="matplotlib.html#cb418-7" tabindex="-1"></a>y1 <span class="op">=</span> np.cos(<span class="dv">2</span> <span class="op">*</span> np.pi <span class="op">*</span> x1) <span class="op">*</span> np.exp(<span class="op">-</span>x1)</span>
<span id="cb418-8"><a href="matplotlib.html#cb418-8" tabindex="-1"></a>axs[<span class="dv">0</span>].plot(x1, y1)</span>
<span id="cb418-9"><a href="matplotlib.html#cb418-9" tabindex="-1"></a>axs[<span class="dv">0</span>].set_xticks([<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>])</span>
<span id="cb418-10"><a href="matplotlib.html#cb418-10" tabindex="-1"></a></span>
<span id="cb418-11"><a href="matplotlib.html#cb418-11" tabindex="-1"></a>axs[<span class="dv">1</span>].plot(x1, y1)</span>
<span id="cb418-12"><a href="matplotlib.html#cb418-12" tabindex="-1"></a>axs[<span class="dv">1</span>].set_xticks([<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>])<span class="co">#要将x轴的刻度放在数据范围中的哪些位置</span></span>
<span id="cb418-13"><a href="matplotlib.html#cb418-13" tabindex="-1"></a>axs[<span class="dv">1</span>].set_xticklabels([<span class="st">'zero'</span>,<span class="st">'one'</span>, <span class="st">'two'</span>, <span class="st">'three'</span>, <span class="st">'four'</span>, <span class="st">'five'</span>,<span class="st">'six'</span>],<span class="co">#设置刻度对应的标签</span></span>
<span id="cb418-14"><a href="matplotlib.html#cb418-14" tabindex="-1"></a>                   rotation<span class="op">=</span><span class="dv">30</span>, fontsize<span class="op">=</span><span class="st">'small'</span>)<span class="co">#rotation选项设定x刻度标签倾斜30度。</span></span>
<span id="cb418-15"><a href="matplotlib.html#cb418-15" tabindex="-1"></a>axs[<span class="dv">1</span>].xaxis.set_ticks_position(<span class="st">'bottom'</span>)<span class="co">#set_ticks_position()方法是用来设置刻度所在的位置，常用的参数有bottom、top、both、none</span></span>
<span id="cb418-16"><a href="matplotlib.html#cb418-16" tabindex="-1"></a><span class="bu">print</span>(axs[<span class="dv">1</span>].xaxis.get_ticklines())</span></code></pre></div>
<pre class="scroll-200"><code>&lt;a list of 14 Line2D ticklines objects&gt;</code></pre>
<div class="sourceCode" id="cb420"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb420-1"><a href="matplotlib.html#cb420-1" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/set_xticklabels2-79.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="tick-locators-and-formatters" class="section level3" number="6.16.2">
<h3>
<span class="header-section-number">6.16.2</span> Tick Locators and Formatters<a class="anchor" aria-label="anchor" href="#tick-locators-and-formatters"><i class="fas fa-link"></i></a>
</h3>
<p>除了上述的简单模式，还可以使用<code>Tick Locators and Formatters</code>完成对于刻度位置和刻度标签的设置。
其中<a href="https://matplotlib.org/api/_as_gen/matplotlib.axis.Axis.set_major_locator.html#matplotlib.axis.Axis.set_major_locator">Axis.set_major_locator</a>和<a href="https://matplotlib.org/api/_as_gen/matplotlib.axis.Axis.set_minor_locator.html#matplotlib.axis.Axis.set_minor_locator">Axis.set_minor_locator</a>方法用来设置标签的位置，<a href="https://matplotlib.org/api/_as_gen/matplotlib.axis.Axis.set_major_formatter.html#matplotlib.axis.Axis.set_major_formatter">Axis.set_major_formatter</a>和<a href="https://matplotlib.org/api/_as_gen/matplotlib.axis.Axis.set_minor_formatter.html#matplotlib.axis.Axis.set_minor_formatter">Axis.set_minor_formatter</a>方法用来设置标签的格式。这种方式的好处是不用显式地列举出刻度值列表。</p>
<p>set_major_formatter和set_minor_formatter这两个formatter格式命令可以接收字符串格式（matplotlib.ticker.StrMethodFormatter）或函数参数（matplotlib.ticker.FuncFormatter）来设置刻度值的格式 。</p>
</div>
<div id="tick-formatters" class="section level3" number="6.16.3">
<h3>
<span class="header-section-number">6.16.3</span> Tick Formatters<a class="anchor" aria-label="anchor" href="#tick-formatters"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb421"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb421-1"><a href="matplotlib.html#cb421-1" tabindex="-1"></a><span class="co"># 接收字符串格式的例子</span></span>
<span id="cb421-2"><a href="matplotlib.html#cb421-2" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>), tight_layout<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb421-3"><a href="matplotlib.html#cb421-3" tabindex="-1"></a><span class="cf">for</span> n, ax <span class="kw">in</span> <span class="bu">enumerate</span>(axs.flat):</span>
<span id="cb421-4"><a href="matplotlib.html#cb421-4" tabindex="-1"></a>    ax.plot(x1<span class="op">*</span><span class="fl">10.</span>, y1)</span>
<span id="cb421-5"><a href="matplotlib.html#cb421-5" tabindex="-1"></a></span>
<span id="cb421-6"><a href="matplotlib.html#cb421-6" tabindex="-1"></a>formatter <span class="op">=</span> mpl.ticker.FormatStrFormatter(<span class="st">'</span><span class="sc">%1.1f</span><span class="st">'</span>)</span>
<span id="cb421-7"><a href="matplotlib.html#cb421-7" tabindex="-1"></a>axs[<span class="dv">0</span>, <span class="dv">1</span>].xaxis.set_major_formatter(formatter)</span>
<span id="cb421-8"><a href="matplotlib.html#cb421-8" tabindex="-1"></a></span>
<span id="cb421-9"><a href="matplotlib.html#cb421-9" tabindex="-1"></a>formatter <span class="op">=</span> mpl.ticker.FormatStrFormatter(<span class="st">'-</span><span class="sc">%1.1f</span><span class="st">'</span>)</span>
<span id="cb421-10"><a href="matplotlib.html#cb421-10" tabindex="-1"></a>axs[<span class="dv">1</span>, <span class="dv">0</span>].xaxis.set_major_formatter(formatter)</span>
<span id="cb421-11"><a href="matplotlib.html#cb421-11" tabindex="-1"></a></span>
<span id="cb421-12"><a href="matplotlib.html#cb421-12" tabindex="-1"></a>formatter <span class="op">=</span> mpl.ticker.FormatStrFormatter(<span class="st">'</span><span class="sc">%1.5f</span><span class="st">'</span>)</span>
<span id="cb421-13"><a href="matplotlib.html#cb421-13" tabindex="-1"></a>axs[<span class="dv">1</span>, <span class="dv">1</span>].xaxis.set_major_formatter(formatter)</span>
<span id="cb421-14"><a href="matplotlib.html#cb421-14" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/tick-formatter-81.png" width="95%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb422"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb422-1"><a href="matplotlib.html#cb422-1" tabindex="-1"></a><span class="co"># 接收函数的例子</span></span>
<span id="cb422-2"><a href="matplotlib.html#cb422-2" tabindex="-1"></a><span class="kw">def</span> formatoddticks(x, pos):</span>
<span id="cb422-3"><a href="matplotlib.html#cb422-3" tabindex="-1"></a>    <span class="co">"""Format odd tick positions."""</span></span>
<span id="cb422-4"><a href="matplotlib.html#cb422-4" tabindex="-1"></a>    <span class="cf">if</span> x <span class="op">%</span> <span class="dv">2</span>:</span>
<span id="cb422-5"><a href="matplotlib.html#cb422-5" tabindex="-1"></a>        <span class="cf">return</span> <span class="ss">f'</span><span class="sc">{</span>x<span class="sc">:1.2f}</span><span class="ss">'</span></span>
<span id="cb422-6"><a href="matplotlib.html#cb422-6" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb422-7"><a href="matplotlib.html#cb422-7" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">''</span></span>
<span id="cb422-8"><a href="matplotlib.html#cb422-8" tabindex="-1"></a></span>
<span id="cb422-9"><a href="matplotlib.html#cb422-9" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">5</span>, <span class="dv">3</span>), tight_layout<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb422-10"><a href="matplotlib.html#cb422-10" tabindex="-1"></a>ax.plot(x1, y1)</span>
<span id="cb422-11"><a href="matplotlib.html#cb422-11" tabindex="-1"></a>ax.xaxis.set_major_formatter(formatoddticks)</span>
<span id="cb422-12"><a href="matplotlib.html#cb422-12" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/tick-function-83.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="tick-locators" class="section level3" number="6.16.4">
<h3>
<span class="header-section-number">6.16.4</span> Tick Locators<a class="anchor" aria-label="anchor" href="#tick-locators"><i class="fas fa-link"></i></a>
</h3>
<p>在普通的绘图中，我们可以直接通过上图的set_ticks进行设置刻度的位置，缺点是需要自己指定或者接受matplotlib默认给定的刻度。当需要更改刻度的位置时，matplotlib给了常用的几种locator的类型。如果要绘制更复杂的图，可以先设置locator的类型，然后通过axs.xaxis.set_major_locator(locator)绘制即可</p>
<pre><code>locator=plt.MaxNLocator(nbins=7)#自动选择合适的位置，并且刻度之间最多不超过7（nbins）个间隔
locator=plt.FixedLocator(locs=[0,0.5,1.5,2.5,3.5,4.5,5.5,6])#直接指定刻度所在的位置  
locator=plt.AutoLocator()#自动分配刻度值的位置  
locator=plt.IndexLocator(offset=0.5, base=1)#面元间距是1，从0.5开始  
locator=plt.MultipleLocator(1.5)#将刻度的标签设置为1.5的倍数  
locator=plt.LinearLocator(numticks=5)#线性划分5等分，4个刻度  </code></pre>
<div class="sourceCode" id="cb424"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb424-1"><a href="matplotlib.html#cb424-1" tabindex="-1"></a><span class="co"># 接收各种locator的例子</span></span>
<span id="cb424-2"><a href="matplotlib.html#cb424-2" tabindex="-1"></a>fig, axs <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">5</span>), tight_layout<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb424-3"><a href="matplotlib.html#cb424-3" tabindex="-1"></a><span class="cf">for</span> n, ax <span class="kw">in</span> <span class="bu">enumerate</span>(axs.flat):</span>
<span id="cb424-4"><a href="matplotlib.html#cb424-4" tabindex="-1"></a>    ax.plot(x1<span class="op">*</span><span class="fl">10.</span>, y1)</span>
<span id="cb424-5"><a href="matplotlib.html#cb424-5" tabindex="-1"></a></span>
<span id="cb424-6"><a href="matplotlib.html#cb424-6" tabindex="-1"></a>locator <span class="op">=</span> mpl.ticker.AutoLocator()</span>
<span id="cb424-7"><a href="matplotlib.html#cb424-7" tabindex="-1"></a>axs[<span class="dv">0</span>, <span class="dv">0</span>].xaxis.set_major_locator(locator)</span>
<span id="cb424-8"><a href="matplotlib.html#cb424-8" tabindex="-1"></a></span>
<span id="cb424-9"><a href="matplotlib.html#cb424-9" tabindex="-1"></a>locator <span class="op">=</span> mpl.ticker.MaxNLocator(nbins<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb424-10"><a href="matplotlib.html#cb424-10" tabindex="-1"></a>axs[<span class="dv">0</span>, <span class="dv">1</span>].xaxis.set_major_locator(locator)</span>
<span id="cb424-11"><a href="matplotlib.html#cb424-11" tabindex="-1"></a></span>
<span id="cb424-12"><a href="matplotlib.html#cb424-12" tabindex="-1"></a>locator <span class="op">=</span> mpl.ticker.MultipleLocator(<span class="dv">5</span>)</span>
<span id="cb424-13"><a href="matplotlib.html#cb424-13" tabindex="-1"></a>axs[<span class="dv">1</span>, <span class="dv">0</span>].xaxis.set_major_locator(locator)</span>
<span id="cb424-14"><a href="matplotlib.html#cb424-14" tabindex="-1"></a></span>
<span id="cb424-15"><a href="matplotlib.html#cb424-15" tabindex="-1"></a>locator <span class="op">=</span> mpl.ticker.FixedLocator([<span class="dv">0</span>,<span class="dv">7</span>,<span class="dv">14</span>,<span class="dv">21</span>,<span class="dv">28</span>])</span>
<span id="cb424-16"><a href="matplotlib.html#cb424-16" tabindex="-1"></a>axs[<span class="dv">1</span>, <span class="dv">1</span>].xaxis.set_major_locator(locator)</span>
<span id="cb424-17"><a href="matplotlib.html#cb424-17" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/tick-locator-85.png" width="95%" style="display: block; margin: auto;"></div>
<p>此外<code>matplotlib.dates</code> 模块还提供了特殊的设置日期型刻度格式和位置的方式</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb425-1"><a href="matplotlib.html#cb425-1" tabindex="-1"></a><span class="co"># 特殊的日期型locator和formatter</span></span>
<span id="cb425-2"><a href="matplotlib.html#cb425-2" tabindex="-1"></a>locator <span class="op">=</span> mdates.DayLocator(bymonthday<span class="op">=</span>[<span class="dv">1</span>,<span class="dv">15</span>,<span class="dv">25</span>])</span>
<span id="cb425-3"><a href="matplotlib.html#cb425-3" tabindex="-1"></a>formatter <span class="op">=</span> mdates.DateFormatter(<span class="st">'%b </span><span class="sc">%d</span><span class="st">'</span>)</span>
<span id="cb425-4"><a href="matplotlib.html#cb425-4" tabindex="-1"></a></span>
<span id="cb425-5"><a href="matplotlib.html#cb425-5" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">5</span>, <span class="dv">3</span>), tight_layout<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb425-6"><a href="matplotlib.html#cb425-6" tabindex="-1"></a>ax.xaxis.set_major_locator(locator)</span>
<span id="cb425-7"><a href="matplotlib.html#cb425-7" tabindex="-1"></a>ax.xaxis.set_major_formatter(formatter)</span>
<span id="cb425-8"><a href="matplotlib.html#cb425-8" tabindex="-1"></a>base <span class="op">=</span> datetime.datetime(<span class="dv">2017</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb425-9"><a href="matplotlib.html#cb425-9" tabindex="-1"></a>time <span class="op">=</span> [base <span class="op">+</span> datetime.timedelta(days<span class="op">=</span>x) <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(x1))]</span>
<span id="cb425-10"><a href="matplotlib.html#cb425-10" tabindex="-1"></a>ax.plot(time, y1)</span>
<span id="cb425-11"><a href="matplotlib.html#cb425-11" tabindex="-1"></a>ax.tick_params(axis<span class="op">=</span><span class="st">'x'</span>, rotation<span class="op">=</span><span class="dv">70</span>)</span>
<span id="cb425-12"><a href="matplotlib.html#cb425-12" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/tick-date-87.png" width="95%" style="display: block; margin: auto;"></div>
</div>
</div>
<div id="legend图例" class="section level2" number="6.17">
<h2>
<span class="header-section-number">6.17</span> legend（图例）<a class="anchor" aria-label="anchor" href="#legend%E5%9B%BE%E4%BE%8B"><i class="fas fa-link"></i></a>
</h2>
<p>在具体学习图例之前，首先解释几个术语：<br><strong>legend entry（图例条目)</strong><br>
每个图例由一个或多个legend entries组成。一个entry包含一个key和其对应的label。<br><strong>legend key（图例键)</strong><br>
每个legend label左面的colored/patterned marker（彩色/图案标记）<br><strong>legend label（图例标签)</strong><br>
描述由key来表示的handle的文本<br><strong>legend handle（图例句柄)</strong><br>
用于在图例中生成适当图例条目的原始对象</p>
<p>以下面这个图为例，右侧的方框中的共有两个legend entry；两个legend key，分别是一个蓝色和一个黄色的legend key；两个legend label，一个名为‘Line up’和一个名为‘Line Down’的legend label</p>
<div class="inline-figure"><img src="https://img-blog.csdnimg.cn/1442273f150044139d54b6c2c6384e37.png"></div>
<p>图例的绘制同样有OO模式和pyplot模式两种方式，写法都是一样的，使用legend()即可调用。<br>
以下面的代码为例，在使用legend方法时，我们可以手动传入两个变量，句柄和标签，用以指定条目中的特定绘图对象和显示的标签值。<br>
当然通常更简单的操作是不传入任何参数，此时matplotlib会自动寻找合适的图例条目。</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb426-1"><a href="matplotlib.html#cb426-1" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb426-2"><a href="matplotlib.html#cb426-2" tabindex="-1"></a>line_up, <span class="op">=</span> ax.plot([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>], label<span class="op">=</span><span class="st">'Line 2'</span>)</span>
<span id="cb426-3"><a href="matplotlib.html#cb426-3" tabindex="-1"></a>line_down, <span class="op">=</span> ax.plot([<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>], label<span class="op">=</span><span class="st">'Line 1'</span>)</span>
<span id="cb426-4"><a href="matplotlib.html#cb426-4" tabindex="-1"></a>ax.legend(handles <span class="op">=</span> [line_up, line_down], labels <span class="op">=</span> [<span class="st">'Line Up'</span>, <span class="st">'Line Down'</span>])</span>
<span id="cb426-5"><a href="matplotlib.html#cb426-5" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/legend-89.png" width="95%" style="display: block; margin: auto;"></div>
<p>legend其他常用的几个参数如下：</p>
<p><strong>设置图例位置</strong><br>
loc参数接收一个字符串或数字表示图例出现的位置<br>
ax.legend(loc=‘upper center’) 等同于ax.legend(loc=9)</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th>Location String</th>
<th>Location Code</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>‘best’</td>
<td>0</td>
</tr>
<tr class="even">
<td>‘upper right’</td>
<td>1</td>
</tr>
<tr class="odd">
<td>‘upper left’</td>
<td>2</td>
</tr>
<tr class="even">
<td>‘lower left’</td>
<td>3</td>
</tr>
<tr class="odd">
<td>‘lower right’</td>
<td>4</td>
</tr>
<tr class="even">
<td>‘right’</td>
<td>5</td>
</tr>
<tr class="odd">
<td>‘center left’</td>
<td>6</td>
</tr>
<tr class="even">
<td>‘center right’</td>
<td>7</td>
</tr>
<tr class="odd">
<td>‘lower center’</td>
<td>8</td>
</tr>
<tr class="even">
<td>‘upper center’</td>
<td>9</td>
</tr>
<tr class="odd">
<td>‘center’</td>
<td>10</td>
</tr>
</tbody>
</table></div>
<div class="sourceCode" id="cb427"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb427-1"><a href="matplotlib.html#cb427-1" tabindex="-1"></a>fig,axes <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">4</span>,figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">4</span>))</span>
<span id="cb427-2"><a href="matplotlib.html#cb427-2" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">4</span>):</span>
<span id="cb427-3"><a href="matplotlib.html#cb427-3" tabindex="-1"></a>    axes[i].plot([<span class="fl">0.5</span>],[<span class="fl">0.5</span>])</span>
<span id="cb427-4"><a href="matplotlib.html#cb427-4" tabindex="-1"></a>    axes[i].legend(labels<span class="op">=</span><span class="st">'a'</span>,loc<span class="op">=</span>i)  <span class="co"># 观察loc参数传入不同值时图例的位置</span></span>
<span id="cb427-5"><a href="matplotlib.html#cb427-5" tabindex="-1"></a>fig.tight_layout()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/legend1-91.png" width="95%" style="display: block; margin: auto;"></div>
<p><strong>设置图例边框及背景</strong></p>
<div class="sourceCode" id="cb428"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb428-1"><a href="matplotlib.html#cb428-1" tabindex="-1"></a>fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">3</span>))</span>
<span id="cb428-2"><a href="matplotlib.html#cb428-2" tabindex="-1"></a>axes <span class="op">=</span> fig.subplots(<span class="dv">1</span>,<span class="dv">3</span>)</span>
<span id="cb428-3"><a href="matplotlib.html#cb428-3" tabindex="-1"></a><span class="cf">for</span> i, ax <span class="kw">in</span> <span class="bu">enumerate</span>(axes):</span>
<span id="cb428-4"><a href="matplotlib.html#cb428-4" tabindex="-1"></a>    ax.plot([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],label<span class="op">=</span><span class="ss">f'ax </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb428-5"><a href="matplotlib.html#cb428-5" tabindex="-1"></a>axes[<span class="dv">0</span>].legend(frameon<span class="op">=</span><span class="va">False</span>) <span class="co">#去掉图例边框</span></span>
<span id="cb428-6"><a href="matplotlib.html#cb428-6" tabindex="-1"></a>axes[<span class="dv">1</span>].legend(edgecolor<span class="op">=</span><span class="st">'blue'</span>) <span class="co">#设置图例边框颜色</span></span>
<span id="cb428-7"><a href="matplotlib.html#cb428-7" tabindex="-1"></a>axes[<span class="dv">2</span>].legend(facecolor<span class="op">=</span><span class="st">'gray'</span>)</span>
<span id="cb428-8"><a href="matplotlib.html#cb428-8" tabindex="-1"></a>plt.show() <span class="co">#设置图例背景颜色,若无边框,参数无效</span></span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/legend2-93.png" width="95%" style="display: block; margin: auto;"></div>
<p>​</p>
<p><strong>设置图例标题</strong></p>
<div class="sourceCode" id="cb429"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb429-1"><a href="matplotlib.html#cb429-1" tabindex="-1"></a>fig,ax <span class="op">=</span>plt.subplots()</span>
<span id="cb429-2"><a href="matplotlib.html#cb429-2" tabindex="-1"></a>ax.plot([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],label<span class="op">=</span><span class="st">'label'</span>)</span>
<span id="cb429-3"><a href="matplotlib.html#cb429-3" tabindex="-1"></a>ax.legend(title<span class="op">=</span><span class="st">'legend title'</span>)</span>
<span id="cb429-4"><a href="matplotlib.html#cb429-4" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/legend3-95.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="思考题-3" class="section level2" number="6.18">
<h2>
<span class="header-section-number">6.18</span> 思考题<a class="anchor" aria-label="anchor" href="#%E6%80%9D%E8%80%83%E9%A2%98-3"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>请尝试使用两种方式模仿画出下面的图表(重点是柱状图上的标签)，本文学习的text方法和matplotlib自带的柱状图标签方法bar_label</li>
</ul>
<div class="inline-figure"><img src="https://img-blog.csdnimg.cn/99bc6e007eb34fc09015589d56c6eafc.png" width="95%" style="display: block; margin: auto;"></div>
<div class="inline-figure"><img src=""></div>
<p>第五回详细介绍matplotlib中样式和颜色的使用，绘图样式和颜色是丰富可视化图表的重要手段，因此熟练掌握本章可以让可视化图表变得更美观，突出重点和凸显艺术性。<br>
关于绘图样式，常见的有3种方法，分别是修改预定义样式，自定义样式和rcparams。<br>
关于颜色使用，本章介绍了常见的5种表示单色颜色的基本方法，以及colormap多色显示的方法。</p>
</div>
<div id="matplotlib的绘图样式style" class="section level2" number="6.19">
<h2>
<span class="header-section-number">6.19</span> matplotlib的绘图样式（style）<a class="anchor" aria-label="anchor" href="#matplotlib%E7%9A%84%E7%BB%98%E5%9B%BE%E6%A0%B7%E5%BC%8Fstyle"><i class="fas fa-link"></i></a>
</h2>
<p>在matplotlib中，要想设置绘制样式，最简单的方法是在绘制元素时单独设置样式。
但是有时候，当用户在做专题报告时，往往会希望保持整体风格的统一而不用对每张图一张张修改，因此matplotlib库还提供了四种批量修改全局样式的方式</p>
<div id="matplotlib预先定义样式" class="section level3" number="6.19.1">
<h3>
<span class="header-section-number">6.19.1</span> matplotlib预先定义样式<a class="anchor" aria-label="anchor" href="#matplotlib%E9%A2%84%E5%85%88%E5%AE%9A%E4%B9%89%E6%A0%B7%E5%BC%8F"><i class="fas fa-link"></i></a>
</h3>
<p>matplotlib贴心地提供了许多内置的样式供用户使用，使用方法很简单，只需在python脚本的最开始输入想使用style的名称即可调用，尝试调用不同内置样式，比较区别</p>
<div class="sourceCode" id="cb430"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb430-1"><a href="matplotlib.html#cb430-1" tabindex="-1"></a>plt.style.use(<span class="st">'default'</span>)</span>
<span id="cb430-2"><a href="matplotlib.html#cb430-2" tabindex="-1"></a>plt.plot([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>],[<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>])</span>
<span id="cb430-3"><a href="matplotlib.html#cb430-3" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/style-1.png" width="95%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb431"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb431-1"><a href="matplotlib.html#cb431-1" tabindex="-1"></a>plt.style.use(<span class="st">'ggplot'</span>)</span>
<span id="cb431-2"><a href="matplotlib.html#cb431-2" tabindex="-1"></a>plt.plot([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>],[<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>])</span>
<span id="cb431-3"><a href="matplotlib.html#cb431-3" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/style2-3.png" width="95%" style="display: block; margin: auto;"></div>
<p>那么matplotlib究竟内置了那些样式供使用呢？总共以下26种丰富的样式可供选择。</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb432-1"><a href="matplotlib.html#cb432-1" tabindex="-1"></a><span class="bu">print</span>(plt.style.available)</span></code></pre></div>
<pre class="scroll-200"><code>['Solarize_Light2', '_classic_test_patch', '_mpl-gallery', '_mpl-gallery-nogrid', 'bmh', 'classic', 'dark_background', 'fast', 'fivethirtyeight', 'ggplot', 'grayscale', 'seaborn-v0_8', 'seaborn-v0_8-bright', 'seaborn-v0_8-colorblind', 'seaborn-v0_8-dark', 'seaborn-v0_8-dark-palette', 'seaborn-v0_8-darkgrid', 'seaborn-v0_8-deep', 'seaborn-v0_8-muted', 'seaborn-v0_8-notebook', 'seaborn-v0_8-paper', 'seaborn-v0_8-pastel', 'seaborn-v0_8-poster', 'seaborn-v0_8-talk', 'seaborn-v0_8-ticks', 'seaborn-v0_8-white', 'seaborn-v0_8-whitegrid', 'tableau-colorblind10']</code></pre>
</div>
<div id="用户自定义stylesheet" class="section level3" number="6.19.2">
<h3>
<span class="header-section-number">6.19.2</span> 用户自定义stylesheet<a class="anchor" aria-label="anchor" href="#%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89stylesheet"><i class="fas fa-link"></i></a>
</h3>
<p>在任意路径下创建一个后缀名为mplstyle的样式清单，编辑文件添加以下样式内容</p>
<blockquote>
<p>axes.titlesize : 24<br>
axes.labelsize : 20<br>
lines.linewidth : 3<br>
lines.markersize : 10<br>
xtick.labelsize : 16<br>
ytick.labelsize : 16</p>
</blockquote>
<p>引用自定义stylesheet后观察图表变化。</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb434-1"><a href="matplotlib.html#cb434-1" tabindex="-1"></a>plt.style.use(<span class="st">'static/docs/presentation.mplstyle'</span>)</span>
<span id="cb434-2"><a href="matplotlib.html#cb434-2" tabindex="-1"></a>plt.plot([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>],[<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>])</span>
<span id="cb434-3"><a href="matplotlib.html#cb434-3" tabindex="-1"></a>plt.show()</span></code></pre></div>
<p>值得特别注意的是，matplotlib支持混合样式的引用，只需在引用时输入一个样式列表，若是几个样式中涉及到同一个参数，右边的样式表会覆盖左边的值。</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb435-1"><a href="matplotlib.html#cb435-1" tabindex="-1"></a>plt.style.use([<span class="st">'dark_background'</span>, <span class="st">'file/presentation.mplstyle'</span>])</span>
<span id="cb435-2"><a href="matplotlib.html#cb435-2" tabindex="-1"></a>plt.plot([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>],[<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>])</span>
<span id="cb435-3"><a href="matplotlib.html#cb435-3" tabindex="-1"></a>plt.show()</span></code></pre></div>
</div>
<div id="设置rcparams" class="section level3" number="6.19.3">
<h3>
<span class="header-section-number">6.19.3</span> 设置rcparams<a class="anchor" aria-label="anchor" href="#%E8%AE%BE%E7%BD%AErcparams"><i class="fas fa-link"></i></a>
</h3>
<p>我们还可以通过修改默认rc设置的方式改变样式，所有rc设置都保存在一个叫做 matplotlib.rcParams的变量中。<br>
修改过后再绘图，可以看到绘图样式发生了变化。</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb436-1"><a href="matplotlib.html#cb436-1" tabindex="-1"></a>plt.style.use(<span class="st">'default'</span>) <span class="co"># 恢复到默认样式</span></span>
<span id="cb436-2"><a href="matplotlib.html#cb436-2" tabindex="-1"></a>plt.plot([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>],[<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>])</span>
<span id="cb436-3"><a href="matplotlib.html#cb436-3" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/rcparam-5.png" width="95%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb437"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb437-1"><a href="matplotlib.html#cb437-1" tabindex="-1"></a>mpl.rcParams[<span class="st">'lines.linewidth'</span>] <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb437-2"><a href="matplotlib.html#cb437-2" tabindex="-1"></a>mpl.rcParams[<span class="st">'lines.linestyle'</span>] <span class="op">=</span> <span class="st">'--'</span></span>
<span id="cb437-3"><a href="matplotlib.html#cb437-3" tabindex="-1"></a>plt.plot([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>],[<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>])</span>
<span id="cb437-4"><a href="matplotlib.html#cb437-4" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/raparam2-7.png" width="95%" style="display: block; margin: auto;"></div>
<p>另外matplotlib也还提供了一种更便捷的修改样式方式，可以一次性修改多个样式。</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb438-1"><a href="matplotlib.html#cb438-1" tabindex="-1"></a>mpl.rc(<span class="st">'lines'</span>, linewidth<span class="op">=</span><span class="dv">4</span>, linestyle<span class="op">=</span><span class="st">'-.'</span>)</span>
<span id="cb438-2"><a href="matplotlib.html#cb438-2" tabindex="-1"></a>plt.plot([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>],[<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>])</span>
<span id="cb438-3"><a href="matplotlib.html#cb438-3" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/rc-9.png" width="95%" style="display: block; margin: auto;"></div>
</div>
</div>
<div id="matplotlib的色彩设置color" class="section level2" number="6.20">
<h2>
<span class="header-section-number">6.20</span> matplotlib的色彩设置（color）<a class="anchor" aria-label="anchor" href="#matplotlib%E7%9A%84%E8%89%B2%E5%BD%A9%E8%AE%BE%E7%BD%AEcolor"><i class="fas fa-link"></i></a>
</h2>
<p>在可视化中，如何选择合适的颜色和搭配组合也是需要仔细考虑的，色彩选择要能够反映出可视化图像的主旨。<br>
从可视化编码的角度对颜色进行分析，可以将颜色分为<code>色相、亮度和饱和度</code>三个视觉通道。通常来说：<br><code>色相</code>： 没有明显的顺序性、一般不用来表达数据量的高低，而是用来表达数据列的类别。<br><code>明度和饱和度</code>： 在视觉上很容易区分出优先级的高低、被用作表达顺序或者表达数据量视觉通道。<br>
具体关于色彩理论部分的知识，不属于本教程的重点，请参阅有关拓展材料学习。<br><a href="https://zhuanlan.zhihu.com/p/88892542">学会这6个可视化配色基本技巧，还原数据本身的意义</a></p>
<p>在matplotlib中，设置颜色有以下几种方式：</p>
<div id="rgb或rgba" class="section level3" number="6.20.1">
<h3>
<span class="header-section-number">6.20.1</span> RGB或RGBA<a class="anchor" aria-label="anchor" href="#rgb%E6%88%96rgba"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb439"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb439-1"><a href="matplotlib.html#cb439-1" tabindex="-1"></a>plt.style.use(<span class="st">'default'</span>)</span></code></pre></div>
<div class="sourceCode" id="cb440"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb440-1"><a href="matplotlib.html#cb440-1" tabindex="-1"></a><span class="co"># 颜色用[0,1]之间的浮点数表示，四个分量按顺序分别为(red, green, blue, alpha)，其中alpha透明度可省略</span></span>
<span id="cb440-2"><a href="matplotlib.html#cb440-2" tabindex="-1"></a>plt.plot([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],[<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>],color<span class="op">=</span>(<span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.5</span>))</span>
<span id="cb440-3"><a href="matplotlib.html#cb440-3" tabindex="-1"></a>plt.plot([<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>],[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],color<span class="op">=</span>(<span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.5</span>, <span class="fl">0.5</span>))</span>
<span id="cb440-4"><a href="matplotlib.html#cb440-4" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/rgb1-11.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="hex-rgb-或-rgba" class="section level3" number="6.20.2">
<h3>
<span class="header-section-number">6.20.2</span> HEX RGB 或 RGBA<a class="anchor" aria-label="anchor" href="#hex-rgb-%E6%88%96-rgba"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb441"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb441-1"><a href="matplotlib.html#cb441-1" tabindex="-1"></a><span class="co"># 用十六进制颜色码表示，同样最后两位表示透明度，可省略</span></span>
<span id="cb441-2"><a href="matplotlib.html#cb441-2" tabindex="-1"></a>plt.plot([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],[<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>],color<span class="op">=</span><span class="st">'#0f0f0f'</span>)</span>
<span id="cb441-3"><a href="matplotlib.html#cb441-3" tabindex="-1"></a>plt.plot([<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>],[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],color<span class="op">=</span><span class="st">'#0f0f0f80'</span>)</span>
<span id="cb441-4"><a href="matplotlib.html#cb441-4" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/hex1-13.png" width="95%" style="display: block; margin: auto;"></div>
<p>RGB颜色和HEX颜色之间是可以一一对应的，以下网址提供了两种色彩表示方法的转换工具。<br><a href="https://www.colorhexa.com/">https://www.colorhexa.com/</a></p>
</div>
<div id="灰度色阶" class="section level3" number="6.20.3">
<h3>
<span class="header-section-number">6.20.3</span> 灰度色阶<a class="anchor" aria-label="anchor" href="#%E7%81%B0%E5%BA%A6%E8%89%B2%E9%98%B6"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb442"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb442-1"><a href="matplotlib.html#cb442-1" tabindex="-1"></a><span class="co"># 当只有一个位于[0,1]的值时，表示灰度色阶</span></span>
<span id="cb442-2"><a href="matplotlib.html#cb442-2" tabindex="-1"></a>plt.plot([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],[<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>],color<span class="op">=</span><span class="st">'0.5'</span>)</span>
<span id="cb442-3"><a href="matplotlib.html#cb442-3" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/huidu-15.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="单字符基本颜色" class="section level3" number="6.20.4">
<h3>
<span class="header-section-number">6.20.4</span> 单字符基本颜色<a class="anchor" aria-label="anchor" href="#%E5%8D%95%E5%AD%97%E7%AC%A6%E5%9F%BA%E6%9C%AC%E9%A2%9C%E8%89%B2"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb443"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb443-1"><a href="matplotlib.html#cb443-1" tabindex="-1"></a><span class="co"># matplotlib有八个基本颜色，可以用单字符串来表示，分别是'b', 'g', 'r', 'c', 'm', 'y', 'k', 'w'，对应的是blue, green, red, cyan, magenta, yellow, black, and white的英文缩写</span></span>
<span id="cb443-2"><a href="matplotlib.html#cb443-2" tabindex="-1"></a>plt.plot([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],[<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>],color<span class="op">=</span><span class="st">'m'</span>)</span>
<span id="cb443-3"><a href="matplotlib.html#cb443-3" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/char-color-17.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="颜色名称" class="section level3" number="6.20.5">
<h3>
<span class="header-section-number">6.20.5</span> 颜色名称<a class="anchor" aria-label="anchor" href="#%E9%A2%9C%E8%89%B2%E5%90%8D%E7%A7%B0"><i class="fas fa-link"></i></a>
</h3>
<div class="sourceCode" id="cb444"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb444-1"><a href="matplotlib.html#cb444-1" tabindex="-1"></a><span class="co"># matplotlib提供了颜色对照表，可供查询颜色对应的名称</span></span>
<span id="cb444-2"><a href="matplotlib.html#cb444-2" tabindex="-1"></a>plt.plot([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],[<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>],color<span class="op">=</span><span class="st">'tan'</span>)</span>
<span id="cb444-3"><a href="matplotlib.html#cb444-3" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/color-name-19.png" width="95%" style="display: block; margin: auto;"></div>
<div class="inline-figure"><img src="https://matplotlib.org/3.1.0/_images/sphx_glr_named_colors_002.png" width="95%" style="display: block; margin: auto;"></div>
<div class="inline-figure"><img src="https://matplotlib.org/3.1.0/_images/sphx_glr_named_colors_003.png" width="95%" style="display: block; margin: auto;"></div>
</div>
<div id="使用colormap设置一组颜色" class="section level3" number="6.20.6">
<h3>
<span class="header-section-number">6.20.6</span> 使用colormap设置一组颜色<a class="anchor" aria-label="anchor" href="#%E4%BD%BF%E7%94%A8colormap%E8%AE%BE%E7%BD%AE%E4%B8%80%E7%BB%84%E9%A2%9C%E8%89%B2"><i class="fas fa-link"></i></a>
</h3>
<p>有些图表支持使用colormap的方式配置一组颜色，从而在可视化中通过色彩的变化表达更多信息。</p>
<p>在matplotlib中，colormap共有五种类型:</p>
<ul>
<li>顺序（Sequential）。通常使用单一色调，逐渐改变亮度和颜色渐渐增加，用于表示有顺序的信息</li>
<li>发散（Diverging）。改变两种不同颜色的亮度和饱和度，这些颜色在中间以不饱和的颜色相遇;当绘制的信息具有关键中间值（例如地形）或数据偏离零时，应使用此值。</li>
<li>循环（Cyclic）。改变两种不同颜色的亮度，在中间和开始/结束时以不饱和的颜色相遇。用于在端点处环绕的值，例如相角，风向或一天中的时间。</li>
<li>定性（Qualitative）。常是杂色，用来表示没有排序或关系的信息。</li>
<li>杂色（Miscellaneous）。一些在特定场景使用的杂色组合，如彩虹，海洋，地形等。</li>
</ul>
<div class="sourceCode" id="cb445"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb445-1"><a href="matplotlib.html#cb445-1" tabindex="-1"></a>x <span class="op">=</span> np.random.randn(<span class="dv">50</span>)</span>
<span id="cb445-2"><a href="matplotlib.html#cb445-2" tabindex="-1"></a>y <span class="op">=</span> np.random.randn(<span class="dv">50</span>)</span>
<span id="cb445-3"><a href="matplotlib.html#cb445-3" tabindex="-1"></a>plt.scatter(x,y,c<span class="op">=</span>x,cmap<span class="op">=</span><span class="st">'RdPu'</span>)</span>
<span id="cb445-4"><a href="matplotlib.html#cb445-4" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="inline-figure"><img src="matplotlib_files/figure-html/colormap-1.png" width="95%" style="display: block; margin: auto;"></div>
<p>在以下官网页面可以查询上述五种colormap的字符串表示和颜色图的对应关系<br><a href="https://matplotlib.org/stable/tutorials/colors/colormaps.html">https://matplotlib.org/stable/tutorials/colors/colormaps.html</a></p>
</div>
</div>
<div id="思考题-4" class="section level2" number="6.21">
<h2>
<span class="header-section-number">6.21</span> 思考题<a class="anchor" aria-label="anchor" href="#%E6%80%9D%E8%80%83%E9%A2%98-4"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>学习如何自定义colormap，并将其应用到任意一个数据集中，绘制一幅图像，注意colormap的类型要和数据集的特性相匹配，并做简单解释</li>
</ul>
</div>
</div>
<style>

/* Style the tab */
/* .tab {
    overflow: hidden;
    border: 1px solid #ccc;
    background-color: #f1f1f1;
} */
.tab {
    overflow: hidden;
    display: flex;
    align-items: flex-start;
    flex-direction: row;
    flex-wrap: wrap;
    padding: 0;
    /* margin-bottom: 8px; */
    /* margin-left: -8px; */
    /* margin-right: 0px; */
    /* border-bottom:1px solid #e0e0e0; */
    height: 32px;
    /*flex-basis: 100px;*/
    /* background-color: aliceblue; */
}

/* Style the buttons inside the tab */
/* .tab button {
    background-color: inherit;
    float: left;
    border: none;
    outline: none;
    cursor: pointer;
    padding: 14px 16px;
    transition: 0.3s;
    font-size: 17px;
} */

.tab button {
    background-color: inherit;
    margin:0;
    text-align: center;
    font-weight: 500;
    min-width: 100px;
    /*width:fit-content;*/
    height: 100%;
    /* padding:5px,5px; */
    border: none;
    font-size: 1rem;
    font-weight:400;
    line-height: 32px;
    letter-spacing: .5px;
}

/* Change background color of buttons on hover */
/* .tab button:hover {
    background-color: #ddd;
} */
.tab button:hover {
    background-color: aliceblue;
}

/* Create an active/current tablink class */
/* .tab button.active {
    background-color: #ccc;
} */
.tab button.active {
    border-bottom: 2px solid rgb(33,150,243);
    background-color: aliceblue;
    padding-left:0px;
    padding-right:0px;
}

/* Style the tab content */
/* .tabcontent {
    display: none;
    padding: 6px 12px;
    border: 1px solid #ccc;
    border-top: none;
} */
.tabcontent {
    display: none;
    /* border: 1px solid aliceblue; */
    /*background-color: aliceblue;*/
    /* margin-left: -8px; */
    /* margin-top: -8px; */
 }

.tabheader{
    display: none;
}

pre {
  word-break: normal;
  word-wrap: normal;
  margin-left: 0px;
}
</style>
<script>
    var tab = document.getElementsByClassName("tabset");
    for(i=0;i<tab.length;i++){
    var hL = tab[i].children[0].nodeName[1];
    var tabContents = tab[i].getElementsByTagName("h"+String(Number(hL)+1));
    var tabCon = document.createElement("div");
    tabCon.className = "tab";
    tab[i].insertBefore(tabCon,tabContents[0].parentNode);
     for(j=0;j<tabContents.length;j++){
         var tabConDiv = tabContents[j].parentNode;
         var tabId = tabConDiv.getAttribute("id");
         var tabNumber = tabConDiv.getAttribute("number").replaceAll('.','-');
         var newID = tabNumber + '-' + tabId;
         var button = document.createElement("button");
         button.className = "tablinks";
         button.setAttribute("onclick","openTab(event,'"+newID+"')");
         button.innerText = tabId.split('-')[0];
        //  button.innerText = tabContents[j].innerText;
         tabCon.appendChild(button);
         tabConDiv.setAttribute("id",newID);
         tabConDiv.className = "tabcontent";
         tabContents[j].innerHTML = "";
         tabContents[j].className = "tabheader";
     }
     tabContents[0].parentNode.style.display = "block";
     tabCon.children[0].className += " active"
    }

function openTab(evt,tabName){
    var i, tabcontent, tablinks;
//     tabcontent = document.getElementsByClassName("tabcontent");
//     for (i = 0; i < tabcontent.length; i++) {
//         tabcontent[i].style.display = "none";
//   }
//     tablinks = document.getElementsByClassName("tablinks");
//     for (i = 0; i < tablinks.length; i++) {
//     tablinks[i].className = tablinks[i].className.replace(" active", "");
//   }
//   document.getElementById(tabName).style.display = "block";
//   evt.currentTarget.className += " active";
    var container = evt.currentTarget.parentNode;
    tabcontent = container.parentNode.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
  }
    tablinks = container.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }
  document.getElementById(tabName).style.display = "block";
  evt.currentTarget.className += " active";
}
</script><div class="giscus">
<script src="https://giscus.app/client.js" data-repo="wangchenglong99/wangchenglong99.github.io" data-repo-id="R_kgDOI6UvHg" data-category="Announcements" data-category-id="DIC_kwDOI6UvHs4CUJAN" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light_high_contrast" data-lang="zh-CN" crossorigin="anonymous" async>
</script><div></div>
  

  

</div>
<div class="chapter-nav">
<div class="prev"><a href="introduction-1.html">introduction</a></div>
<div class="next"><a href="%E5%9B%BE%E8%A1%A8%E5%AE%9E%E4%BE%8B.html"><span class="header-section-number">7</span> 图表实例</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#matplotlib"><span class="header-section-number">6</span> matplotlib</a></li>
<li><a class="nav-link" href="#%E8%AE%A4%E8%AF%86matplotlib"><span class="header-section-number">6.1</span> 认识matplotlib</a></li>
<li><a class="nav-link" href="#%E4%B8%80%E4%B8%AA%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84%E7%BB%98%E5%9B%BE%E4%BE%8B%E5%AD%90"><span class="header-section-number">6.2</span> 一个最简单的绘图例子</a></li>
<li><a class="nav-link" href="#figure%E7%9A%84%E7%BB%84%E6%88%90"><span class="header-section-number">6.3</span> Figure的组成</a></li>
<li><a class="nav-link" href="#%E4%B8%A4%E7%A7%8D%E7%BB%98%E5%9B%BE%E6%8E%A5%E5%8F%A3"><span class="header-section-number">6.4</span> 两种绘图接口</a></li>
<li><a class="nav-link" href="#%E9%80%9A%E7%94%A8%E7%BB%98%E5%9B%BE%E6%A8%A1%E6%9D%BF"><span class="header-section-number">6.5</span> 通用绘图模板</a></li>
<li><a class="nav-link" href="#%E6%80%9D%E8%80%83%E9%A2%98"><span class="header-section-number">6.6</span> 思考题</a></li>
<li>
<a class="nav-link" href="#%E6%A6%82%E8%BF%B0"><span class="header-section-number">6.7</span> 概述</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#matplotlib%E7%9A%84%E4%B8%89%E5%B1%82api"><span class="header-section-number">6.7.1</span> matplotlib的三层api</a></li>
<li><a class="nav-link" href="#artist%E7%9A%84%E5%88%86%E7%B1%BB"><span class="header-section-number">6.7.2</span> Artist的分类</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%85%83%E7%B4%A0---primitives"><span class="header-section-number">6.8</span> 基本元素 - primitives</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#dlines"><span class="header-section-number">6.8.1</span> 2DLines</a></li>
<li><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AEline2d%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="header-section-number">6.8.2</span> 如何设置Line2D的属性</a></li>
<li><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E7%BB%98%E5%88%B6lines"><span class="header-section-number">6.8.3</span> 如何绘制lines</a></li>
<li><a class="nav-link" href="#patches"><span class="header-section-number">6.8.4</span> patches</a></li>
<li><a class="nav-link" href="#collections"><span class="header-section-number">6.8.5</span> collections</a></li>
<li><a class="nav-link" href="#images"><span class="header-section-number">6.8.6</span> images</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E5%AE%B9%E5%99%A8---object-container"><span class="header-section-number">6.9</span> 对象容器 - Object container</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#figure%E5%AE%B9%E5%99%A8"><span class="header-section-number">6.9.1</span> Figure容器</a></li>
<li><a class="nav-link" href="#axes%E5%AE%B9%E5%99%A8"><span class="header-section-number">6.9.2</span> Axes容器</a></li>
<li><a class="nav-link" href="#axis%E5%AE%B9%E5%99%A8"><span class="header-section-number">6.9.3</span> Axis容器</a></li>
<li><a class="nav-link" href="#tick%E5%AE%B9%E5%99%A8"><span class="header-section-number">6.9.4</span> Tick容器</a></li>
</ul>
</li>
<li><a class="nav-link" href="#%E6%80%9D%E8%80%83%E9%A2%98-1"><span class="header-section-number">6.10</span> 思考题</a></li>
<li><a class="nav-link" href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="header-section-number">6.11</span> 参考资料</a></li>
<li>
<a class="nav-link" href="#%E5%AD%90%E5%9B%BE"><span class="header-section-number">6.12</span> 子图</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-plt.subplots-%E7%BB%98%E5%88%B6%E5%9D%87%E5%8C%80%E7%8A%B6%E6%80%81%E4%B8%8B%E7%9A%84%E5%AD%90%E5%9B%BE"><span class="header-section-number">6.12.1</span> 使用 plt.subplots 绘制均匀状态下的子图</a></li>
<li><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-gridspec-%E7%BB%98%E5%88%B6%E9%9D%9E%E5%9D%87%E5%8C%80%E5%AD%90%E5%9B%BE"><span class="header-section-number">6.12.2</span> 使用 GridSpec 绘制非均匀子图</a></li>
</ul>
</li>
<li><a class="nav-link" href="#%E5%AD%90%E5%9B%BE%E4%B8%8A%E7%9A%84%E6%96%B9%E6%B3%95"><span class="header-section-number">6.13</span> 子图上的方法</a></li>
<li><a class="nav-link" href="#%E6%80%9D%E8%80%83%E9%A2%98-2"><span class="header-section-number">6.14</span> 思考题</a></li>
<li>
<a class="nav-link" href="#figure%E5%92%8Caxes%E4%B8%8A%E7%9A%84%E6%96%87%E6%9C%AC"><span class="header-section-number">6.15</span> Figure和Axes上的文本</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E6%96%87%E6%9C%ACapi%E7%A4%BA%E4%BE%8B"><span class="header-section-number">6.15.1</span> 文本API示例</a></li>
<li><a class="nav-link" href="#text---%E5%AD%90%E5%9B%BE%E4%B8%8A%E7%9A%84%E6%96%87%E6%9C%AC"><span class="header-section-number">6.15.2</span> text - 子图上的文本</a></li>
<li><a class="nav-link" href="#xlabel%E5%92%8Cylabel---%E5%AD%90%E5%9B%BE%E7%9A%84xy%E8%BD%B4%E6%A0%87%E7%AD%BE"><span class="header-section-number">6.15.3</span> xlabel和ylabel - 子图的x，y轴标签</a></li>
<li><a class="nav-link" href="#title%E5%92%8Csuptitle---%E5%AD%90%E5%9B%BE%E5%92%8C%E7%94%BB%E5%B8%83%E7%9A%84%E6%A0%87%E9%A2%98"><span class="header-section-number">6.15.4</span> title和suptitle - 子图和画布的标题</a></li>
<li><a class="nav-link" href="#annotate---%E5%AD%90%E5%9B%BE%E7%9A%84%E6%B3%A8%E8%A7%A3"><span class="header-section-number">6.15.5</span> annotate - 子图的注解</a></li>
<li><a class="nav-link" href="#%E5%AD%97%E4%BD%93%E7%9A%84%E5%B1%9E%E6%80%A7%E8%AE%BE%E7%BD%AE"><span class="header-section-number">6.15.6</span> 字体的属性设置</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#tick%E4%B8%8A%E7%9A%84%E6%96%87%E6%9C%AC"><span class="header-section-number">6.16</span> Tick上的文本</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%E7%AE%80%E5%8D%95%E6%A8%A1%E5%BC%8F"><span class="header-section-number">6.16.1</span> 简单模式</a></li>
<li><a class="nav-link" href="#tick-locators-and-formatters"><span class="header-section-number">6.16.2</span> Tick Locators and Formatters</a></li>
<li><a class="nav-link" href="#tick-formatters"><span class="header-section-number">6.16.3</span> Tick Formatters</a></li>
<li><a class="nav-link" href="#tick-locators"><span class="header-section-number">6.16.4</span> Tick Locators</a></li>
</ul>
</li>
<li><a class="nav-link" href="#legend%E5%9B%BE%E4%BE%8B"><span class="header-section-number">6.17</span> legend（图例）</a></li>
<li><a class="nav-link" href="#%E6%80%9D%E8%80%83%E9%A2%98-3"><span class="header-section-number">6.18</span> 思考题</a></li>
<li>
<a class="nav-link" href="#matplotlib%E7%9A%84%E7%BB%98%E5%9B%BE%E6%A0%B7%E5%BC%8Fstyle"><span class="header-section-number">6.19</span> matplotlib的绘图样式（style）</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#matplotlib%E9%A2%84%E5%85%88%E5%AE%9A%E4%B9%89%E6%A0%B7%E5%BC%8F"><span class="header-section-number">6.19.1</span> matplotlib预先定义样式</a></li>
<li><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E8%87%AA%E5%AE%9A%E4%B9%89stylesheet"><span class="header-section-number">6.19.2</span> 用户自定义stylesheet</a></li>
<li><a class="nav-link" href="#%E8%AE%BE%E7%BD%AErcparams"><span class="header-section-number">6.19.3</span> 设置rcparams</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#matplotlib%E7%9A%84%E8%89%B2%E5%BD%A9%E8%AE%BE%E7%BD%AEcolor"><span class="header-section-number">6.20</span> matplotlib的色彩设置（color）</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#rgb%E6%88%96rgba"><span class="header-section-number">6.20.1</span> RGB或RGBA</a></li>
<li><a class="nav-link" href="#hex-rgb-%E6%88%96-rgba"><span class="header-section-number">6.20.2</span> HEX RGB 或 RGBA</a></li>
<li><a class="nav-link" href="#%E7%81%B0%E5%BA%A6%E8%89%B2%E9%98%B6"><span class="header-section-number">6.20.3</span> 灰度色阶</a></li>
<li><a class="nav-link" href="#%E5%8D%95%E5%AD%97%E7%AC%A6%E5%9F%BA%E6%9C%AC%E9%A2%9C%E8%89%B2"><span class="header-section-number">6.20.4</span> 单字符基本颜色</a></li>
<li><a class="nav-link" href="#%E9%A2%9C%E8%89%B2%E5%90%8D%E7%A7%B0"><span class="header-section-number">6.20.5</span> 颜色名称</a></li>
<li><a class="nav-link" href="#%E4%BD%BF%E7%94%A8colormap%E8%AE%BE%E7%BD%AE%E4%B8%80%E7%BB%84%E9%A2%9C%E8%89%B2"><span class="header-section-number">6.20.6</span> 使用colormap设置一组颜色</a></li>
</ul>
</li>
<li><a class="nav-link" href="#%E6%80%9D%E8%80%83%E9%A2%98-4"><span class="header-section-number">6.21</span> 思考题</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/wangchenglong99/wangchenglong99.github.io/blob/main/matplotlib.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/wangchenglong99/wangchenglong99.github.io/edit/main/matplotlib.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>wcl</strong>" was written by wcl. It was last built on 2024-04-29.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</div>
</body>
</html>
